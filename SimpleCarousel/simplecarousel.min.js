window.SimpleCarousel||(window.SimpleCarousel=function(){"use strict";var e;function y(){return"undefined"!=typeof Promise&&Promise.defer?Promise.defer():"undefined"!=typeof PromiseUtils&&PromiseUtils.defer?PromiseUtils.defer():(this.resolve=null,this.reject=null,this.promise=new Promise(function(e,n){this.resolve=e,this.reject=n}.bind(this)),void Object.freeze(this))}!function(){for(var i=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var t=(new Date).getTime(),a=Math.max(0,16-(t-i)),r=window.setTimeout(function(){e(t+a)},a);return i=t+a,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),e=function(){var n=setTimeout;function a(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function r(t,a){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var e=1===t._state?a.onFulfilled:a.onRejected;if(null!==e){var n;try{n=e(t._value)}catch(e){return void l(a.promise,e)}o(a.promise,n)}else(1===t._state?o:l)(a.promise,t._value)})):t._deferreds.push(a)}function o(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof i)return n._state=3,n._value=e,void s(n);if("function"==typeof t)return void u((a=t,r=e,function(){a.apply(r,arguments)}),n)}n._state=1,n._value=e,s(n)}catch(e){l(n,e)}var a,r}function l(e,n){e._state=2,e._value=n,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)r(e,e._deferreds[n]);e._deferreds=null}function c(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,o(n,e))},function(e){t||(t=!0,l(n,e))})}catch(e){if(t)return;t=!0,l(n,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,n){var t=new this.constructor(a);return r(this,new c(e,n,t)),t},i.prototype.finally=function(n){var t=this.constructor;return this.then(function(e){return t.resolve(n()).then(function(){return e})},function(e){return t.resolve(n()).then(function(){return t.reject(e)})})},i.all=function(n){return new i(function(a,r){if(!n||void 0===n.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(n);if(0===i.length)return a([]);var o=i.length;function l(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void t.call(e,function(e){l(n,e)},r)}i[n]=e,0==--o&&a(i)}catch(e){r(e)}}for(var e=0;e<i.length;e++)l(e,i[e])})},i.resolve=function(n){return n&&"object"==typeof n&&n.constructor===i?n:new i(function(e){e(n)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(r){return new i(function(e,n){for(var t=0,a=r.length;t<a;t++)r[t].then(e,n)})},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();e.Promise||(e.Promise=i)},"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e();var o=!0,l=0,c=null,u=null,s=!1,f=!0,d=300,r=!1,i=1e4,v=!0,h=!1,p=!0,m=!0,w=!0,n={},g={container:null,list:null,navTarget:null,navContainer:null,navDots:null},t="simple-carousel",b={container:t+"-container",list:t+"-list",slide:t+"-slide",focus:t+"-focus",nextFocus:t+"-next-focus",navContainer:t+"-nav-container",navOverlay:t+"-nav-container-overlay",navAutoHide:t+"-nav-autohide",navAppend:t+"-nav-append",navBar:t+"-nav-bar",navNextContainer:t+"-nav-next-container",navNext:t+"-nav-next",navPrevContainer:t+"-nav-prev-container",navPrev:t+"-nav-prev",navDotsContainer:t+"-nav-dots-container",navDots:t+"-nav-dots",navDot:t+"-nav-dot",navDotActive:t+"-nav-dot-active"},x={navBar_render:null,next:null,next_click:null,next_clicked:null,prev:null,prev_click:null,prev_clicked:null,transition:null,dots_click:null,dots_clicked:null,rotate:null};function a(e,n){var t=typeof n;switch(e){case"container":case"id":if("string"===t)n,g.container=document.getElementById(n);else if("object"===t)try{n instanceof HTMLElement?g.container=n:(n instanceof HTMLCollection||n instanceof NodeList)&&0<n.length?g.container=n[0]:n instanceof jQuery&&0<n.length&&(g.container=n[0]),g.container&&g.container.getAttribute&&(g.container.getAttribute("id")||"")}catch(e){}break;case"css":if("string"===t)b.container+=" "+n;else if("object"===t)for(var a in n)n.hasOwnProperty(a)&&b.hasOwnProperty(a)&&(b[a]+=" "+n[a]);break;case"width":"number"===t&&10<n&&(c=parseInt(n,10));break;case"height":"number"===t&&10<n&&(u=parseInt(n,10));break;case"infinite":"boolean"===t&&(o=n);break;case"resize":case"resizeFrame":case"resize-frame":"boolean"===t&&(s=n);break;case"index":"number"===t&&0<=n&&(l=parseInt(n,10));break;case"animate":"boolean"===t&&(f=n);break;case"animationduration":case"animationDuration":"number"===t&&0<n&&(d=parseInt(n,10));break;case"autorotate":case"autoRotate":"boolean"===t&&(r=n);break;case"delay":case"autorotatedelay":case"autoRotateDelay":case"autorotatedelaymilliseconds":case"autoRotateDelayMilliseconds":"number"===t&&0<=n&&(i=Math.round(n));break;case"width":"number"===t&&(c=n);break;case"nav":"boolean"===t&&(w=m=p=n);break;case"navnext":case"navNext":"boolean"===t&&(p=n);break;case"navprev":case"navPrev":"boolean"===t&&(m=n);break;case"dots":case"navdots":case"navDots":"boolean"===t&&(w=n);break;case"overlay":case"navoverlay":case"navOverlay":"boolean"===t&&(v=n);break;case"autohide":case"autoHide":case"navautohide":case"navAutohide":case"navAutoHide":"boolean"===t&&(h=n);break;case"navcontainer":case"navContainer":case"navtarget":case"navTarget":try{"string"===t?g.navTarget=document.getElementById(n):"object"===t&&(n instanceof HTMLElement?g.navTarget=n:(n instanceof HTMLCollection||n instanceof NodeList)&&0<n.length?g.navTarget=n[0]:n instanceof jQuery&&0<n.length&&(g.navTarget=n[0]))}catch(e){}break;default:"function"===t&&x.hasOwnProperty(e)&&(x[e]=n)}}function C(e){"boolean"!=typeof e&&(e=f);var n=g.list.children,t=n.length;l<0&&(l=0),t<=l&&(l=t-1),0!==t&&(H(n,b.nextFocus),H(n,b.focus),n[l].style.left="0px",M(n[l],[b.slide,b.focus]),P(),s&&R(g.list.querySelectorAll("."+b.focus),!1))}function _(e,n){"boolean"!=typeof n&&(n=f);var t=new y,a=g.list.children.length;if(l<0&&(l=0),a<=l&&(l=a-1),e<0&&(e=0),a<=e&&(e=a-1),O("transition",[l,e,g.list.children],g.list.children[e]),e!==l)if(n){var r=l<e?A:k,i=function(){r().then(function(){e!==l?i():t.resolve(l)})};i()}else l=e,C(),t.resolve(l);else t.resolve(l);return t.promise}function A(e){"boolean"!=typeof e&&(e=f);var n=new y,t=g.list.children,a=t.length;l<0&&(l=0),a<=l&&(l=a-1);var r=Math.max(l+1,0);if(o?a<=r&&(r=0):a<=r&&(r=a-1),O("next",[l,r,g.list.children],g.list.children[r]),r!==l)if(e){M(t[r],b.nextFocus);var i=N(t[r]);B(t[r]);t[r].style.left=i+"px",s&&R(t[r],e),z(t[l],"left",0-i+"px",d).then(function(e){H(e,b.focus)}),z(t[r],"left","0px",d).then(function(e){M(e,b.focus),H(e,b.nextFocus),l=r,n.resolve(l)}),P(r)}else l=r,C(),n.resolve(l);else n.resolve(l);return n.promise}function k(e){"boolean"!=typeof e&&(e=f);var n=new y,t=g.list.children,a=t.length;l<0&&(l=0),a<=l&&(l=a-1);var r=l-1;if(o?r<0&&(r=a-1):r<0&&(r=0),O("prev",[l,r,g.list.children],g.list.children[r]),r!==l)if(e){M(t[r],b.nextFocus);var i=N(t[r]);B(t[r]);t[r].style.left=0-i+"px",s&&R(t[r],e),z(t[l],"left",i+"px",d).then(function(e){H(e,b.focus)}),z(t[r],"left","0px",d).then(function(e){M(e,b.focus),H(e,b.nextFocus),l=r,n.resolve(l)}),P(r)}else l=r,C(),n.resolve(l);else n.resolve(l);return n.promise}function j(){if(m||p||w){g.navContainer=U("div",{class:b.navContainer});var e,n,t=U("div",{class:b.navBar}),a=U("div",{class:b.navPrevContainer}),r=U("div",{class:b.navNextContainer}),i=U("div",{class:b.navDotsContainer});m&&(e=U("div",{class:b.navPrev}),a.appendChild(e),a.addEventListener("click",L,!1)),w&&(g.navDots=U("ul",{class:b.navDots}),i.appendChild(g.navDots),T(),P()),p&&(n=U("div",{class:b.navNext}),r.appendChild(n),r.addEventListener("click",I,!1)),v&&M(g.navContainer,b.navOverlay),v&&h&&M(g.navContainer,b.navAutoHide),t.appendChild(a),t.appendChild(i),t.appendChild(r),g.navContainer.appendChild(t),O("navBar_render",[l,t],g.navContainer),null!==g.navTarget||v||M(g.container,b.navAppend),(g.navTarget||g.container).appendChild(g.navContainer)}}function T(){if(g.navDots instanceof HTMLElement){var e=g.list.children.length;g.navDots.innerHTML="";for(var n=0;n<e;n++){var t=U("li",{class:b.navDot,"data-index":n});t.addEventListener("click",E,!1),g.navDots.append(t)}}}function P(e){if(g.navDots instanceof HTMLElement){"number"!=typeof e&&(e=l);var n=g.list.children,t=g.navDots.children;if(n.length!==t.length)return T(),void P();0!==n.length&&(e<0&&(e=0),e>=t.length&&(e=t.length-1),H(t,b.navDotActive),M(t[e],b.navDotActive))}}function F(){D(),n.autoRotate=setTimeout(function(){D();var e=function(){O("rotate",[l,g.list.children],g.list.children[l]),F()};o?A().then(e):l>=g.list.children.length-1?_(0).then(e):A().then(e)},i)}function D(){clearTimeout(n.autoRotate)}function I(e){D();var n=e||window.event,t=e.target||e.srcElement;O("next_click",[n,l,g.navContainer],t),A().then(function(){O("next_clicked",[n,l,g.navContainer],t)})}function L(e){D();var n=e||window.event,t=e.target||e.srcElement;O("prev_click",[n,l,g.navContainer],t),k().then(function(){O("prev_clicked",[n,l,g.navContainer],t)})}function E(e){D();var n=e||window.event,t=e.target||e.srcElement,a=parseInt(t.getAttribute("data-index")||-1,10);O("dots_click",[n,a,g.navContainer],t),-1<a&&_(a).then(function(){O("dots_clicked",[n,l,g.navContainer],t)})}function O(n,e,t){if(x.hasOwnProperty(n)&&"function"==typeof x[n])try{x[n].apply(t,e)}catch(e){console&&console.error("SimpleCarousel: An error occured while executing '"+n+"' callback: ",e)}}function R(e,n){"boolean"!=typeof n&&(n=f);for(var t=c,a=u,r=e.hasOwnProperty(length)?e:[e],i=0;i<r.length;i++){var o=r[i];t=Math.max(t,N(o)),a=Math.max(a,B(o))}n?(z(g.container,"width",t+"px"),z(g.container,"height",a+"px")):(g.container.style.width=t+"px",g.container.style.height=a+"px")}function M(e,n){if("string"==typeof n&&(n=[n]),n instanceof Array){q(e)||(e=[e]);for(var t=0;t<n.length;t++)for(var a=n[t].split(" "),r=0;r<a.length;r++)for(var i=a[r],o=0;o<e.length;o++){var l=e[o];i&&!S(l,i)&&l.classList.add(i)}}}function H(e,n){if("string"==typeof n&&(n=[n]),n instanceof Array){q(e)||(e=[e]);for(var t=0;t<n.length;t++)for(var a=n[t].split(" "),r=0;r<a.length;r++)for(var i=a[r],o=0;o<e.length;o++){var l=e[o];i&&S(l,i)&&l.classList.remove(i)}}}function S(e,n){return e.classList.contains(n)}function q(e){if("object"==typeof e&&e.hasOwnProperty("length"))return!0;for(var n=[Array,HTMLCollection,NodeList],t=0;t<n.length;t++)if(e instanceof n[t])return!0;return!1}function N(e){var n=window.getComputedStyle(e)||e.currentStyle;return e.offsetWidth+parseInt(n.marginLeft,10)+parseInt(n.marginRight,10)}function B(e){var n=window.getComputedStyle(e)||e.currentStyle;return e.offsetHeight+parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}function z(a,r,e,i){var o=new y;if("string"!=typeof r)return o.reject("Invalid 'prop' argument!"),o.promise;if(!a.style)return o.reject("Invalid 'elem' argument! Not a DOM object"),o.promise;"number"!=typeof i&&(i=300);var n=window.getComputedStyle(a),t="data-orig-position";-1<["top","bottom","left","right"].indexOf(r)&&(a.hasAttribute(t)||a.setAttribute(t,n.position),a.style.position="absolute");var l=null,s=/[^\d]+$/i,c=(s.exec(e+"")||[""])[0],u=parseInt(n[r]||0,10),f=parseInt(e,10),d=(f-u)/i,v=u<=f,h=u;c||(c=(s.exec(n[r])||[""])[0]);var p="data-orig-"+r.toLowerCase(),m="data-last-"+r.toLowerCase();if(a.hasAttribute(p)||a.setAttribute(p,u+c),a.setAttribute(m,u+c),u===f)return a.style[r]=f+(c||0),o.resolve(a),o.promise;return window.requestAnimationFrame(function e(n){l||(l=n);var t=n-l;if(l=n,0<(i-=t))return h+=t*d,(v&&f<h||!v&&h<f)&&(h=f),a.style[r]=h+(c||0),void(h!==f&&window.requestAnimationFrame(e));a.style[r]=f+(c||0),o.resolve(a)}),o.promise}function U(e,n){var t=document.createElement(e);for(var a in n=n||{})n.hasOwnProperty(a)&&t.setAttribute(a,n[a]);return t}var Q=function(){var e={};return Object.defineProperties(e,{next:{enumerable:!0,writable:!1,value:A},prev:{enumerable:!0,writable:!1,value:k},transitionTo:{enumerable:!0,writable:!1,value:_},startAutoRotate:{enumerate:!0,writable:!1,value:F},stopAutoRotate:{enumerate:!0,writable:!1,value:D}}),Object.freeze(e),e};function W(e){var n=new Q;for(var t in e=e||{})e.hasOwnProperty(t)&&a(t,e[t]);return"object"==typeof g.container&&(g.list=g.container.children[0],M(g.container,b.container),M(g.list,b.list),M(g.list.children,b.slide),function(){var e=window.getComputedStyle(g.container)||g.container.currentStyle,n={width:e.width,height:e.height};null===c&&(c=parseInt(n.width,10)),null===u&&(u=parseInt(n.height,10)),g.container.style.width=c+"px",g.container.style.height=u+"px";for(var t=0;t<g.list.children.length;t++){var a=g.list.children[t],r=window.getComputedStyle(a),i=parseInt(r.paddingLeft||0,10),o=parseInt(r.paddingRight||0,10),l=parseInt(r.paddingTop||0,10),s=parseInt(r.paddingBottom||0,10);a.style.width||(a.style.width=c-i-o+"px"),a.style.height||(a.style.height=u-l-s+"px")}}(),j(),C(!1),r&&F()),n}return Object.defineProperties(Q,{}),Object.freeze(W),W}());
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpbXBsZWNhcm91c2VsLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsIlNpbXBsZUNhcm91c2VsIiwiZmFjdG9yeSIsIkRlZmVycmVkIiwiUHJvbWlzZSIsImRlZmVyIiwiUHJvbWlzZVV0aWxzIiwidGhpcyIsInJlc29sdmUiLCJyZWplY3QiLCJwcm9taXNlIiwiYmluZCIsIk9iamVjdCIsImZyZWV6ZSIsImxhc3RUaW1lIiwidmVuZG9ycyIsIngiLCJsZW5ndGgiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImNhbGxiYWNrIiwiZWxlbWVudCIsImN1cnJUaW1lIiwiRGF0ZSIsImdldFRpbWUiLCJ0aW1lVG9DYWxsIiwiTWF0aCIsIm1heCIsImlkIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXRGdW5jIiwibm9vcCIsImZuIiwiVHlwZUVycm9yIiwiX3N0YXRlIiwiX2hhbmRsZWQiLCJfdmFsdWUiLCJ1bmRlZmluZWQiLCJfZGVmZXJyZWRzIiwiZG9SZXNvbHZlIiwiaGFuZGxlIiwic2VsZiIsImRlZmVycmVkIiwiX2ltbWVkaWF0ZUZuIiwiY2IiLCJvbkZ1bGZpbGxlZCIsIm9uUmVqZWN0ZWQiLCJyZXQiLCJlIiwicHVzaCIsIm5ld1ZhbHVlIiwidGhlbiIsImZpbmFsZSIsInRoaXNBcmciLCJhcHBseSIsImFyZ3VtZW50cyIsIl91bmhhbmRsZWRSZWplY3Rpb25GbiIsImkiLCJsZW4iLCJIYW5kbGVyIiwiZG9uZSIsInZhbHVlIiwicmVhc29uIiwiZXgiLCJwcm90b3R5cGUiLCJwcm9tIiwiY29uc3RydWN0b3IiLCJhbGwiLCJhcnIiLCJhcmdzIiwiQXJyYXkiLCJzbGljZSIsImNhbGwiLCJyZW1haW5pbmciLCJyZXMiLCJ2YWwiLCJyYWNlIiwidmFsdWVzIiwic2V0SW1tZWRpYXRlIiwiZXJyIiwiY29uc29sZSIsIndhcm4iLCJnbG9iYWxOUyIsImdsb2JhbCIsIkVycm9yIiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImluZmluaXRlIiwiY3VySW5kZXgiLCJ3aWR0aCIsImhlaWdodCIsInJlc2l6ZUZyYW1lIiwiYW5pbWF0ZURlZmF1bHQiLCJhbmltYXRpb25EdXJhdGlvbiIsImF1dG9Sb3RhdGUiLCJhdXRvUm90YXRlRGVsYXlNaWxsaXNlY29uZHMiLCJuYXZPdmVybGF5IiwibmF2QXV0b0hpZGUiLCJuYXZOZXh0IiwibmF2UHJldiIsIm5hdkRvdHMiLCJ0aW1lciIsImRvbSIsImNvbnRhaW5lciIsImxpc3QiLCJuYXZUYXJnZXQiLCJuYXZDb250YWluZXIiLCJwcmVmaXgiLCJjc3MiLCJzbGlkZSIsImZvY3VzIiwibmV4dEZvY3VzIiwibmF2QXBwZW5kIiwibmF2QmFyIiwibmF2TmV4dENvbnRhaW5lciIsIm5hdlByZXZDb250YWluZXIiLCJuYXZEb3RzQ29udGFpbmVyIiwibmF2RG90IiwibmF2RG90QWN0aXZlIiwibmF2QmFyX3JlbmRlciIsIm5leHQiLCJuZXh0X2NsaWNrIiwibmV4dF9jbGlja2VkIiwicHJldiIsInByZXZfY2xpY2siLCJwcmV2X2NsaWNrZWQiLCJ0cmFuc2l0aW9uIiwiZG90c19jbGljayIsImRvdHNfY2xpY2tlZCIsInJvdGF0ZSIsInNldCIsIm5hbWUiLCJ0eXBlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIkhUTUxFbGVtZW50IiwiSFRNTENvbGxlY3Rpb24iLCJOb2RlTGlzdCIsImpRdWVyeSIsImdldEF0dHJpYnV0ZSIsImVyIiwiY3NzTmFtZSIsImhhc093blByb3BlcnR5IiwicGFyc2VJbnQiLCJyb3VuZCIsInNob3dDdXJyZW50IiwiYW5pbWF0ZSIsInNsaWRlcyIsImNoaWxkcmVuIiwicmVtb3ZlQ2xhc3MiLCJzdHlsZSIsImxlZnQiLCJhZGRDbGFzcyIsInNldEFjdGl2ZU5hdkRvdCIsInNldENvbnRhaW5lckRpbWVuc2lvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidHJhbnNpdGlvblRvIiwidGFyZ2V0SW5kZXgiLCJkZmQiLCJ0cmlnZ2VyQ2FsbGJhY2siLCJ0cmFuc2l0aW9uTmV4dCIsInRyYW5zaXRpb25QcmV2IiwidHJhbnNpdGlvbkxvb3AiLCJuZXh0SW5kZXgiLCJ0YXJnZXRXaWR0aCIsImdldFdpZHRoIiwiZ2V0SGVpZ2h0IiwiQW5pbWF0aW9uIiwiZWxlbSIsImNyZWF0ZU5hdmlnYXRpb25FbGVtZW50cyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzcyIsInByZXZCdXR0b24iLCJuZXh0QnV0dG9uIiwicHJldkNvbnRhaW5lciIsIm5leHRDb250YWluZXIiLCJkb3RzQ29udGFpbmVyIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwicHJldkJ1dHRvbl9jbGljayIsInJlbmRlck5hdkRvdHMiLCJuZXh0QnV0dG9uX2NsaWNrIiwiaW5uZXJIVE1MIiwiZG90IiwiZGF0YS1pbmRleCIsIm5hdkRvdHNfY2xpY2siLCJhcHBlbmQiLCJpbmRleCIsImRvdHMiLCJzdGFydEF1dG9Sb3RhdGUiLCJzdG9wQXV0b1JvdGF0ZSIsImNvbnRpbnVlX3JvdGF0ZSIsImV2dCIsImV2ZW50IiwidGFyZ2V0Iiwic3JjRWxlbWVudCIsIm5keCIsImtleSIsInBhcmFtIiwiY3R4IiwiZXJyb3IiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImVsZW1zIiwiY2xhc3NuYW1lcyIsImlzSHRtbENvbGxlY3Rpb25UeXBlcyIsImNsYXNzZXMiLCJzcGxpdCIsImlpIiwiaWlpIiwiaGFzQ2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJjbGFzc25hbWUiLCJjb250YWlucyIsInR5cGVzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImN1cnJlbnRTdHlsZSIsIm9mZnNldFdpZHRoIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwicHJvcCIsImR1cmF0aW9uIiwiZGF0YU9yaWdQb3NpdGlvbiIsImluZGV4T2YiLCJoYXNBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJwb3NpdGlvbiIsIm9sZHRpbWVzdGFtcCIsInJlRXh0IiwiZXh0IiwiZXhlYyIsInN0YXJ0aW5nVmFsdWUiLCJ1bml0cyIsIm1vdmVVcCIsImN1clZhbCIsImRhdGFPcmlnQXR0ciIsInRvTG93ZXJDYXNlIiwiZGF0YUxhc3RBdHRyIiwic3RlcCIsInRpbWVzdGFtcCIsImdhcCIsInByb3BlcnRpZXMiLCJzaW1wbGVDYXJvdXNlbCIsIm9iaiIsImRlZmluZVByb3BlcnRpZXMiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJlbnVtZXJhdGUiLCJpbml0aWFsaXplIiwib3B0aW9ucyIsIl9zaW1wbGVDYXJvdXNlbCIsInNsaWRlU3R5bGUiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIiwic2V0SW5pdGlhbERpbWVuc2lvbnMiXSwibWFwcGluZ3MiOiJBQUFLQSxPQUFPQyxpQkFBZ0JELE9BQU9DLGVBQWlCLFdBQ2hELGFBa0NDLElBQWtCQyxFQThRbkIsU0FBU0MsSUFDTCxNQUF3QixvQkFBYixTQUE0QkMsUUFBUUMsTUFDcENELFFBQVFDLFFBQ2lCLG9CQUFsQixjQUFpQ0MsYUFBYUQsTUFDckRDLGFBQWFELFNBRXBCRSxLQUFLQyxRQUFVLEtBQ2ZELEtBQUtFLE9BQVMsS0FDZEYsS0FBS0csUUFBVSxJQUFJTixRQUFRLFNBQVVJLEVBQVNDLEdBQzFDRixLQUFLQyxRQUFVQSxFQUNmRCxLQUFLRSxPQUFTQSxHQUNoQkUsS0FBS0osWUFDUEssT0FBT0MsT0FBT04sUUF4VHJCLFdBTUcsSUFGQSxJQUFJTyxFQUFXLEVBQ1hDLEVBQVUsQ0FBQyxLQUFNLE1BQU8sU0FBVSxLQUM5QkMsRUFBSSxFQUFHQSxFQUFJRCxFQUFRRSxTQUFXakIsT0FBT2tCLHdCQUF5QkYsRUFDbEVoQixPQUFPa0Isc0JBQXdCbEIsT0FBT2UsRUFBUUMsR0FBRyx5QkFDakRoQixPQUFPbUIscUJBQXVCbkIsT0FBT2UsRUFBUUMsR0FBRyx5QkFBMkJoQixPQUFP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U0FBU2lILEVBQVdHLFlBQWMsRUFBRyxJQUNsREMsRUFBZ0JySCxTQUFTaUgsRUFBV0ksZUFBaUIsRUFBRyxJQUV2RHZKLEVBQU15QyxNQUFNN0QsUUFBT29CLEVBQU15QyxNQUFNN0QsTUFBU0EsRUFBUXdLLEVBQWNDLEVBQWdCLE1BQzlFckosRUFBTXlDLE1BQU01RCxTQUFRbUIsRUFBTXlDLE1BQU01RCxPQUFVQSxFQUFTeUssRUFBYUMsRUFBaUIsT0ErRHRGQyxHQUdBNUYsSUFHQXhCLEdBQVksR0FHUm5ELEdBQVkrRixLQUdia0UsRUFHWCxPQXhDQXRQLE9BQU9nUCxpQkFBaUJGLEVBQWdCLElBdUN4QzlPLE9BQU9DLE9BQU9tUCxHQUNQQSxFQWh3Q3lDIiwiZmlsZSI6InNpbXBsZWNhcm91c2VsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaWYgKCF3aW5kb3cuU2ltcGxlQ2Fyb3VzZWwpIHdpbmRvdy5TaW1wbGVDYXJvdXNlbCA9IChmdW5jdGlvbigpe1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgLy8jcmVnaW9uIFBPTFlGSUxMU1xyXG4gICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsIGJ5IEVyaWsgTcO2bGxlci4gZml4ZXMgZnJvbSBQYXVsIElyaXNoIGFuZCBUaW5vIFppamRlbFxyXG4gICAgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIGh0dHA6Ly9wYXVsaXJpc2guY29tLzIwMTEvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1hbmltYXRpbmcvXHJcbiAgICAgICAgLy8gaHR0cDovL215Lm9wZXJhLmNvbS9lbW9sbGVyL2Jsb2cvMjAxMS8xMi8yMC9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWVyLWFuaW1hdGluZ1xyXG4gICAgICAgIC8vIE1JVCBsaWNlbnNlXHJcbiAgICAgICAgdmFyIGxhc3RUaW1lID0gMDtcclxuICAgICAgICB2YXIgdmVuZG9ycyA9IFsnbXMnLCAnbW96JywgJ3dlYmtpdCcsICdvJ107XHJcbiAgICAgICAgZm9yKHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpIHtcclxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvd1t2ZW5kb3JzW3hdKydSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcclxuICAgICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0rJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ10gfHwgd2luZG93W3ZlbmRvcnNbeF0rJ0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSddO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSlcclxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNhbGxiYWNrKGN1cnJUaW1lICsgdGltZVRvQ2FsbCk7IH0sIFxyXG4gICAgICAgICAgICAgICAgdGltZVRvQ2FsbCk7XHJcbiAgICAgICAgICAgICAgICBsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpXHJcbiAgICAgICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgIH0oKSk7XHJcblxyXG4gICAgLyoqISBQcm9taXNlIFBvbHlmaWxsIC0gMTMgQXByaWwgMjAxOCAqKi9cclxuICAgIC8qKiEgaHR0cHM6Ly9naXRodWIuY29tL3RheWxvcmhha2VzL3Byb21pc2UtcG9seWZpbGwgKiovXHJcbiAgICAoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xyXG4gICAgICAgIC8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cclxuICAgICAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KCkgOlxyXG4gICAgICAgICAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOiAoZmFjdG9yeSgpKTtcclxuICAgICAgICAvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xyXG4gICAgfSh0aGlzLCAoZnVuY3Rpb24gKCkge1xyXG4gICAgXHJcbiAgICAgICAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gcHJvbWlzZS1wb2x5ZmlsbCB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcclxuICAgICAgICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcclxuICAgICAgICB2YXIgc2V0VGltZW91dEZ1bmMgPSBzZXRUaW1lb3V0O1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gbm9vcCgpIHt9XHJcbiAgICBcclxuICAgICAgICAvLyBQb2x5ZmlsbCBmb3IgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmRcclxuICAgICAgICBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmbi5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIFByb21pc2UoZm4pIHtcclxuICAgICAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFByb21pc2UpKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Jyk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vdCBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5fZGVmZXJyZWRzID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgZG9SZXNvbHZlKGZuLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBoYW5kbGUoc2VsZiwgZGVmZXJyZWQpIHtcclxuICAgICAgICAgICAgd2hpbGUgKHNlbGYuX3N0YXRlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmID0gc2VsZi5fdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNlbGYuX3N0YXRlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kZWZlcnJlZHMucHVzaChkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5faGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIFByb21pc2UuX2ltbWVkaWF0ZUZuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYiA9IHNlbGYuX3N0YXRlID09PSAxID8gZGVmZXJyZWQub25GdWxmaWxsZWQgOiBkZWZlcnJlZC5vblJlamVjdGVkO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNiID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKHNlbGYuX3N0YXRlID09PSAxID8gcmVzb2x2ZSA6IHJlamVjdCkoZGVmZXJyZWQucHJvbWlzZSwgc2VsZi5fdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciByZXQ7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IGNiKHNlbGYuX3ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZGVmZXJyZWQucHJvbWlzZSwgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkZWZlcnJlZC5wcm9taXNlLCByZXQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlKHNlbGYsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQcm9taXNlIFJlc29sdXRpb24gUHJvY2VkdXJlOiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYyN0aGUtcHJvbWlzZS1yZXNvbHV0aW9uLXByb2NlZHVyZVxyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBzZWxmKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZSBjYW5ub3QgYmUgcmVzb2x2ZWQgd2l0aCBpdHNlbGYuJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgJiZcclxuICAgICAgICAgICAgICAgICAgICAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgbmV3VmFsdWUgPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IG5ld1ZhbHVlLnRoZW47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdGF0ZSA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3ZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsZShzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9SZXNvbHZlKGJpbmQodGhlbiwgbmV3VmFsdWUpLCBzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlbGYuX3N0YXRlID0gMTtcclxuICAgICAgICAgICAgICAgIHNlbGYuX3ZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBmaW5hbGUoc2VsZik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChzZWxmLCBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdChzZWxmLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICBzZWxmLl9zdGF0ZSA9IDI7XHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIGZpbmFsZShzZWxmKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBmaW5hbGUoc2VsZikge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5fc3RhdGUgPT09IDIgJiYgc2VsZi5fZGVmZXJyZWRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5faW1tZWRpYXRlRm4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5faGFuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLl91bmhhbmRsZWRSZWplY3Rpb25GbihzZWxmLl92YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsZi5fZGVmZXJyZWRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGUoc2VsZiwgc2VsZi5fZGVmZXJyZWRzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLl9kZWZlcnJlZHMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb21pc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkZ1bGZpbGxlZCA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5vblJlamVjdGVkID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicgPyBvblJlamVjdGVkIDogbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUYWtlIGEgcG90ZW50aWFsbHkgbWlzYmVoYXZpbmcgcmVzb2x2ZXIgZnVuY3Rpb24gYW5kIG1ha2Ugc3VyZVxyXG4gICAgICAgICAqIG9uRnVsZmlsbGVkIGFuZCBvblJlamVjdGVkIGFyZSBvbmx5IGNhbGxlZCBvbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTWFrZXMgbm8gZ3VhcmFudGVlcyBhYm91dCBhc3luY2hyb255LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRvUmVzb2x2ZShmbiwgc2VsZikge1xyXG4gICAgICAgICAgICB2YXIgZG9uZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgZm4oXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNlbGYsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChzZWxmLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9uZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZWplY3Qoc2VsZiwgZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGVbJ2NhdGNoJ10gPSBmdW5jdGlvbiAob25SZWplY3RlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBQcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9tID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XHJcbiAgICBcclxuICAgICAgICAgICAgaGFuZGxlKHRoaXMsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9tKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9tO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBQcm9taXNlLnByb3RvdHlwZVsnZmluYWxseSddID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHZhciBjb25zdHJ1Y3RvciA9IHRoaXMuY29uc3RydWN0b3I7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlamVjdChyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBQcm9taXNlLmFsbCA9IGZ1bmN0aW9uIChhcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmICghYXJyIHx8IHR5cGVvZiBhcnIubGVuZ3RoID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlLmFsbCBhY2NlcHRzIGFuIGFycmF5Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHJldHVybiByZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSBhcmdzLmxlbmd0aDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVzKGksIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgJiYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IHZhbC50aGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyhpLCB2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoLS1yZW1haW5pbmcgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzKGksIGFyZ3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlLmNvbnN0cnVjdG9yID09PSBQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBQcm9taXNlLnJhY2UgPSBmdW5jdGlvbiAodmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdmFsdWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzW2ldLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8vIFVzZSBwb2x5ZmlsbCBmb3Igc2V0SW1tZWRpYXRlIGZvciBwZXJmb3JtYW5jZSBnYWluc1xyXG4gICAgICAgIFByb21pc2UuX2ltbWVkaWF0ZUZuID1cclxuICAgICAgICAgICAgKHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEltbWVkaWF0ZShmbik7XHJcbiAgICAgICAgICAgICAgICB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXRGdW5jKGZuLCAwKTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIFByb21pc2UuX3VuaGFuZGxlZFJlamVjdGlvbkZuID0gZnVuY3Rpb24gX3VuaGFuZGxlZFJlamVjdGlvbkZuKGVycikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUG9zc2libGUgVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uOicsIGVycik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHZhciBnbG9iYWxOUyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZSBvbmx5IHJlbGlhYmxlIG1lYW5zIHRvIGdldCB0aGUgZ2xvYmFsIG9iamVjdCBpc1xyXG4gICAgICAgICAgICAvLyBgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKWBcclxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhpcyBjYXVzZXMgQ1NQIHZpb2xhdGlvbnMgaW4gQ2hyb21lIGFwcHMuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QnKTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCFnbG9iYWxOUy5Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgIGdsb2JhbE5TLlByb21pc2UgPSBQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfSkpKTtcclxuICAgIFxyXG4gICAgLyoqISBEZWZlcnJlZCgpIC0gMTMgQXByaWwgMjAxOCAqKi9cclxuICAgIC8qKiEgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Nb3ppbGxhL0phdmFTY3JpcHRfY29kZV9tb2R1bGVzL1Byb21pc2UuanNtL0RlZmVycmVkICoqL1xyXG4gICAgZnVuY3Rpb24gRGVmZXJyZWQoKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiAoUHJvbWlzZSkgIT0gJ3VuZGVmaW5lZCcgJiYgUHJvbWlzZS5kZWZlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5kZWZlcigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChQcm9taXNlVXRpbHMpICE9ICd1bmRlZmluZWQnICYmIFByb21pc2VVdGlscy5kZWZlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZVV0aWxzLmRlZmVyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5mcmVlemUodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIExPQ0FMIFZBUklBQkxFUywgR0VUVEVSUywgU0VUVEVSU1xyXG4gICAgdmFyIGlkID0gbnVsbCxcclxuICAgICAgICBpbmZpbml0ZSA9IHRydWUsXHJcbiAgICAgICAgY3VySW5kZXggPSAwLFxyXG4gICAgICAgIG1pbldpZHRoID0gMTAsXHJcbiAgICAgICAgd2lkdGggPSBudWxsLFxyXG4gICAgICAgIG1pbkhlaWdodCA9IDEwLFxyXG4gICAgICAgIGhlaWdodCA9IG51bGwsXHJcbiAgICAgICAgcmVzaXplRnJhbWUgPSBmYWxzZSxcclxuICAgICAgICBhbmltYXRlRGVmYXVsdCA9IHRydWUsXHJcbiAgICAgICAgYW5pbWF0aW9uRHVyYXRpb24gPSAzMDAsXHJcbiAgICAgICAgYXV0b1JvdGF0ZSA9IGZhbHNlLFxyXG4gICAgICAgIGF1dG9Sb3RhdGVEZWxheU1pbGxpc2Vjb25kcyA9IDEwMDAwLFxyXG4gICAgICAgIG5hdk92ZXJsYXkgPSB0cnVlLFxyXG4gICAgICAgIG5hdkF1dG9IaWRlID0gZmFsc2UsXHJcbiAgICAgICAgbmF2TmV4dCA9IHRydWUsXHJcbiAgICAgICAgbmF2UHJldiA9IHRydWUsXHJcbiAgICAgICAgbmF2RG90cyA9IHRydWUsXHJcbiAgICAgICAgdGltZXIgPSB7fSxcclxuICAgICAgICBkb20gPSB7XHJcbiAgICAgICAgICAgIFwiY29udGFpbmVyXCI6IG51bGwsXHJcbiAgICAgICAgICAgIFwibGlzdFwiOiBudWxsLFxyXG4gICAgICAgICAgICBcIm5hdlRhcmdldFwiOiBudWxsLFxyXG4gICAgICAgICAgICBcIm5hdkNvbnRhaW5lclwiOiBudWxsLFxyXG4gICAgICAgICAgICBcIm5hdkRvdHNcIjogbnVsbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJlZml4ID0gXCJzaW1wbGUtY2Fyb3VzZWxcIixcclxuICAgICAgICBjc3MgPSB7XHJcbiAgICAgICAgICAgIFwiY29udGFpbmVyXCI6IHByZWZpeCArIFwiLWNvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICBcImxpc3RcIjogcHJlZml4ICsgXCItbGlzdFwiLFxyXG4gICAgICAgICAgICBcInNsaWRlXCI6IHByZWZpeCArIFwiLXNsaWRlXCIsXHJcbiAgICAgICAgICAgIFwiZm9jdXNcIjogcHJlZml4ICsgXCItZm9jdXNcIixcclxuICAgICAgICAgICAgXCJuZXh0Rm9jdXNcIjogcHJlZml4ICsgXCItbmV4dC1mb2N1c1wiLFxyXG5cclxuICAgICAgICAgICAgXCJuYXZDb250YWluZXJcIjogcHJlZml4ICsgXCItbmF2LWNvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICBcIm5hdk92ZXJsYXlcIjogcHJlZml4ICsgXCItbmF2LWNvbnRhaW5lci1vdmVybGF5XCIsXHJcbiAgICAgICAgICAgIFwibmF2QXV0b0hpZGVcIjogcHJlZml4ICsgXCItbmF2LWF1dG9oaWRlXCIsXHJcbiAgICAgICAgICAgIFwibmF2QXBwZW5kXCI6IHByZWZpeCArIFwiLW5hdi1hcHBlbmRcIixcclxuICAgICAgICAgICAgXCJuYXZCYXJcIjogcHJlZml4ICsgXCItbmF2LWJhclwiLFxyXG4gICAgICAgICAgICBcIm5hdk5leHRDb250YWluZXJcIjogcHJlZml4ICsgXCItbmF2LW5leHQtY29udGFpbmVyXCIsXHJcbiAgICAgICAgICAgIFwibmF2TmV4dFwiOiBwcmVmaXggKyBcIi1uYXYtbmV4dFwiLFxyXG4gICAgICAgICAgICBcIm5hdlByZXZDb250YWluZXJcIjogcHJlZml4ICsgXCItbmF2LXByZXYtY29udGFpbmVyXCIsXHJcbiAgICAgICAgICAgIFwibmF2UHJldlwiOiBwcmVmaXggKyBcIi1uYXYtcHJldlwiLFxyXG4gICAgICAgICAgICBcIm5hdkRvdHNDb250YWluZXJcIjogcHJlZml4ICsgXCItbmF2LWRvdHMtY29udGFpbmVyXCIsXHJcbiAgICAgICAgICAgIFwibmF2RG90c1wiOiBwcmVmaXggKyBcIi1uYXYtZG90c1wiLFxyXG4gICAgICAgICAgICBcIm5hdkRvdFwiOiBwcmVmaXggKyBcIi1uYXYtZG90XCIsXHJcbiAgICAgICAgICAgIFwibmF2RG90QWN0aXZlXCI6IHByZWZpeCArIFwiLW5hdi1kb3QtYWN0aXZlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhbGxiYWNrID0ge1xyXG4gICAgICAgICAgICBcIm5hdkJhcl9yZW5kZXJcIjogbnVsbCxcclxuICAgICAgICAgICAgXCJuZXh0XCI6IG51bGwsXHJcbiAgICAgICAgICAgIFwibmV4dF9jbGlja1wiOiBudWxsLFxyXG4gICAgICAgICAgICBcIm5leHRfY2xpY2tlZFwiOiBudWxsLFxyXG4gICAgICAgICAgICBcInByZXZcIjogbnVsbCxcclxuICAgICAgICAgICAgXCJwcmV2X2NsaWNrXCI6IG51bGwsXHJcbiAgICAgICAgICAgIFwicHJldl9jbGlja2VkXCI6IG51bGwsXHJcbiAgICAgICAgICAgIFwidHJhbnNpdGlvblwiOiBudWxsLFxyXG4gICAgICAgICAgICBcImRvdHNfY2xpY2tcIjogbnVsbCxcclxuICAgICAgICAgICAgXCJkb3RzX2NsaWNrZWRcIjogbnVsbCxcclxuICAgICAgICAgICAgXCJyb3RhdGVcIjogbnVsbFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0IChuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5Qcm9wZXJ0eSB2YWx1ZSBzZXR0ZXIuPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm5hbWVcIiB0eXBlPVwiU3RyaW5nXCI+UHJvcGVydHkgbmFtZTwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmFsdWVcIiB0eXBlPVwiQW55XCI+VmFsdWUgb2YgcHJvcGVydHk8L3BhcmFtPlxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiY29udGFpbmVyXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJpZFwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvbS5jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tLmNvbnRhaW5lciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCgodmFsdWUgaW5zdGFuY2VvZiBIVE1MQ29sbGVjdGlvbikgfHwgKHZhbHVlIGluc3RhbmNlb2YgTm9kZUxpc3QpKSAmJiB2YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb20uY29udGFpbmVyID0gdmFsdWVbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBqUXVlcnkgJiYgdmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tLmNvbnRhaW5lciA9IHZhbHVlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb20uY29udGFpbmVyICYmIGRvbS5jb250YWluZXIuZ2V0QXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IGRvbS5jb250YWluZXIuZ2V0QXR0cmlidXRlKFwiaWRcIikgfHwgXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVyKSB7fVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjc3NcIjpcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3NzLmNvbnRhaW5lciArPSBcIiBcIiArIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcIm9iamVjdFwiKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjc3NOYW1lIGluIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShjc3NOYW1lKSAmJiBjc3MuaGFzT3duUHJvcGVydHkoY3NzTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzc1tjc3NOYW1lXSArPSBcIiBcIiArIHZhbHVlW2Nzc05hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ3aWR0aFwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIgJiYgdmFsdWUgPiAxMCkgd2lkdGggPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwiaGVpZ2h0XCI6XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJudW1iZXJcIiAmJiB2YWx1ZSA+IDEwKSBoZWlnaHQgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICBcclxuICAgICAgICAgICAgY2FzZSBcImluZmluaXRlXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJib29sZWFuXCIpIGluZmluaXRlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJyZXNpemVcIjpcclxuICAgICAgICAgICAgY2FzZSBcInJlc2l6ZUZyYW1lXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZXNpemUtZnJhbWVcIjpcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcImJvb2xlYW5cIikgcmVzaXplRnJhbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcImluZGV4XCI6XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJudW1iZXJcIiAmJiB2YWx1ZSA+PSAwKSBjdXJJbmRleCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJhbmltYXRlXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJib29sZWFuXCIpIGFuaW1hdGVEZWZhdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJhbmltYXRpb25kdXJhdGlvblwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiYW5pbWF0aW9uRHVyYXRpb25cIjpcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcIm51bWJlclwiICYmIHZhbHVlID4gMCkgYW5pbWF0aW9uRHVyYXRpb24gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJhdXRvcm90YXRlXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJhdXRvUm90YXRlXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJib29sZWFuXCIpIGF1dG9Sb3RhdGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSBcImRlbGF5XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJhdXRvcm90YXRlZGVsYXlcIjpcclxuICAgICAgICAgICAgY2FzZSBcImF1dG9Sb3RhdGVEZWxheVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiYXV0b3JvdGF0ZWRlbGF5bWlsbGlzZWNvbmRzXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJhdXRvUm90YXRlRGVsYXlNaWxsaXNlY29uZHNcIjpcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcIm51bWJlclwiICYmIHZhbHVlID49IDApIGF1dG9Sb3RhdGVEZWxheU1pbGxpc2Vjb25kcyA9IE1hdGgucm91bmQodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwid2lkdGhcIjpcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcIm51bWJlclwiKSB3aWR0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlIFwibmF2XCI6XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBuYXZOZXh0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbmF2UHJldiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIG5hdkRvdHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibmF2bmV4dFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwibmF2TmV4dFwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiKSBuYXZOZXh0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm5hdnByZXZcIjpcclxuICAgICAgICAgICAgY2FzZSBcIm5hdlByZXZcIjpcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcImJvb2xlYW5cIikgbmF2UHJldiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkb3RzXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJuYXZkb3RzXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJuYXZEb3RzXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJib29sZWFuXCIpIG5hdkRvdHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwib3ZlcmxheVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwibmF2b3ZlcmxheVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwibmF2T3ZlcmxheVwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiKSBuYXZPdmVybGF5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImF1dG9oaWRlXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJhdXRvSGlkZVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwibmF2YXV0b2hpZGVcIjpcclxuICAgICAgICAgICAgY2FzZSBcIm5hdkF1dG9oaWRlXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJuYXZBdXRvSGlkZVwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiKSBuYXZBdXRvSGlkZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJuYXZjb250YWluZXJcIjpcclxuICAgICAgICAgICAgY2FzZSBcIm5hdkNvbnRhaW5lclwiOlxyXG4gICAgICAgICAgICBjYXNlIFwibmF2dGFyZ2V0XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJuYXZUYXJnZXRcIjpcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9tLm5hdlRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwib2JqZWN0XCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb20ubmF2VGFyZ2V0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCgodmFsdWUgaW5zdGFuY2VvZiBIVE1MQ29sbGVjdGlvbikgfHwgKHZhbHVlIGluc3RhbmNlb2YgTm9kZUxpc3QpKSAmJiB2YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tLm5hdlRhcmdldCA9IHZhbHVlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIGpRdWVyeSAmJiB2YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tLm5hdlRhcmdldCA9IHZhbHVlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVyKSB7fVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJmdW5jdGlvblwiICYmIGNhbGxiYWNrLmhhc093blByb3BlcnR5KG5hbWUpKSBjYWxsYmFja1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIE5BVklHQVRJT05cclxuICAgIGZ1bmN0aW9uIHNob3dDdXJyZW50IChhbmltYXRlKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlNob3dzIHRoZSBjdXJyZW50IGluZGV4ZWQgc2xpZGUgd2l0aG91dCBhbmltYXRpb25zLlxyXG4gICAgICAgIC8vLyBVc2VmdWwgZm9yIGluaXRpYWxpemF0aW9uIG9yIHN3aXRjaGluZyB0byB0aGUgbmV3IGluZGV4IGltbWVkaWF0ZWx5Ljwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJhbmltYXRlXCIgdHlwZT1cIkJvb2xlYW5cIj5PcHRpb25hbC4gSWYgdHJ1ZSBhbmltYXRlcyB0aGUgY29udGFpbmVyIGRpbWVuc2lvbnMgb25seS4gRGVmYXVsdDogYW5pbWF0ZURlZmF1bHQ7PC9wYXJhbT5cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBhbmltYXRlICE9PSBcImJvb2xlYW5cIikgYW5pbWF0ZSA9IGFuaW1hdGVEZWZhdWx0O1xyXG5cclxuICAgICAgICB2YXIgc2xpZGVzID0gZG9tLmxpc3QuY2hpbGRyZW4sXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHNsaWRlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIC8vIG1ha2Ugc3VyZSBjdXJyZW50IGFuZCBuZXh0IGluZGV4IGlzIHdpdGhpbiBsaW1pdHNcclxuICAgICAgICBpZiAoY3VySW5kZXggPCAwKSBjdXJJbmRleCA9IDA7XHJcbiAgICAgICAgaWYgKGN1ckluZGV4ID49IGxlbmd0aCkgY3VySW5kZXggPSBsZW5ndGggLSAxO1xyXG4gICAgICAgIGlmIChsZW5ndGggPT09IDApIHJldHVybjsgICAvLyBub3RoaW5nIHRvIHNob3dcclxuXHJcbiAgICAgICAgLy8gcmVtb3ZlIGFkZCBzbGlkZSBmb2N1c1xyXG4gICAgICAgIHJlbW92ZUNsYXNzKHNsaWRlcywgY3NzLm5leHRGb2N1cyk7XHJcbiAgICAgICAgcmVtb3ZlQ2xhc3Moc2xpZGVzLCBjc3MuZm9jdXMpO1xyXG4gICAgICAgIHNsaWRlc1tjdXJJbmRleF0uc3R5bGUubGVmdCA9IFwiMHB4XCI7XHJcbiAgICAgICAgYWRkQ2xhc3Moc2xpZGVzW2N1ckluZGV4XSwgW2Nzcy5zbGlkZSwgY3NzLmZvY3VzXSk7XHJcblxyXG4gICAgICAgIHNldEFjdGl2ZU5hdkRvdCgpO1xyXG5cclxuICAgICAgICAvLyBhZGp1c3QgZnJhbWUgdG8gZml0IHNsaWRlXHJcbiAgICAgICAgaWYgKHJlc2l6ZUZyYW1lKSBzZXRDb250YWluZXJEaW1lbnNpb25zKGRvbS5saXN0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyBjc3MuZm9jdXMpLCBmYWxzZSk7XHJcblxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdHJhbnNpdGlvblRvICh0YXJnZXRJbmRleCwgYW5pbWF0ZSkge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5UcmFuc2l0aW9ucyB0aGUgc2xpZGVzIHRvIGEgc3BlY2lmaWMgaW5kZXguPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRhcmdldEluZGV4XCIgdHlwZT1cIk51bWJlclwiPkluZGV4IG9mIHNsaWRlIHRvIHRyYW5zaXRpb24gdG8uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJhbmltYXRlXCIgdHlwZT1cIkJvb2xlYW5cIj5PcHRpb25hbC4gSWYgdHJ1ZSBhbmltYXRlcyB0aGUgdHJhbnNpdGlvbnMuIERlZmF1bHQ6IGFuaW1hdGVEZWZhdWx0OzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm4gdHlwZT1cIlByb21pc2VcIj5SZXNvbHZlcyBhZnRlciBhbGwgYW5pbWF0aW9ucywgcmV0dXJucyBuZXcgaW5kZXguPC9yZXR1cm4+XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHR5cGVvZiBhbmltYXRlICE9PSBcImJvb2xlYW5cIikgYW5pbWF0ZSA9IGFuaW1hdGVEZWZhdWx0O1xyXG5cclxuICAgICAgICB2YXIgZGZkID0gbmV3IERlZmVycmVkKCksXHJcbiAgICAgICAgICAgIHNsaWRlcyA9IGRvbS5saXN0LmNoaWxkcmVuLFxyXG4gICAgICAgICAgICBsZW5ndGggPSBzbGlkZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyBtYWtlIHN1cmUgY3VycmVudCBpbmRleCBpcyB3aXRoaW4gbGltaXRzXHJcbiAgICAgICAgaWYgKGN1ckluZGV4IDwgMCkgY3VySW5kZXggPSAwO1xyXG4gICAgICAgIGlmIChjdXJJbmRleCA+PSBsZW5ndGgpIGN1ckluZGV4ID0gbGVuZ3RoIC0gMTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBtYWtlIHN1cmUgdGFyZ2V0IGluZGV4IGlzIHdpdGhpbiBsaW1pdHNcclxuICAgICAgICBpZiAodGFyZ2V0SW5kZXggPCAwKSB0YXJnZXRJbmRleCA9IDA7XHJcbiAgICAgICAgaWYgKHRhcmdldEluZGV4ID49IGxlbmd0aCkgdGFyZ2V0SW5kZXggPSBsZW5ndGggLSAxO1xyXG5cclxuICAgICAgICB0cmlnZ2VyQ2FsbGJhY2soXCJ0cmFuc2l0aW9uXCIsIFtjdXJJbmRleCwgdGFyZ2V0SW5kZXgsIGRvbS5saXN0LmNoaWxkcmVuXSwgZG9tLmxpc3QuY2hpbGRyZW5bdGFyZ2V0SW5kZXhdKTtcclxuXHJcbiAgICAgICAgLy8gYXJlIHdlIHRyYW5zaXRpb25pbmcgdG8gYSBkaWZmZXJudCBzbGlkZT9cclxuICAgICAgICBpZiAodGFyZ2V0SW5kZXggIT09IGN1ckluZGV4KSB7XHJcbiAgICAgICAgICAgIC8vIHllcywgd2UgYXJlIHRyYW5zaXRpb25pbmdcclxuICAgICAgICAgICAgLy8gZG8gd2UgYW5pbWF0ZSB0aGUgdHJhbnNpdGlvbj9cclxuICAgICAgICAgICAgaWYgKGFuaW1hdGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHllcywgYW5pbWF0ZSB0aGUgdHJhbnNpdGlvblxyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiBkaXJlY3Rpb24gKG5leHQ/IHByZXY/KVxyXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zaXRpb24gPSAodGFyZ2V0SW5kZXggPiBjdXJJbmRleCkgPyB0cmFuc2l0aW9uTmV4dCA6IHRyYW5zaXRpb25QcmV2LFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25Mb29wID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcnVuIHRyYW5zaXRpb24uLi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbigpLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFyZSB3ZSB0aGVyZSB5ZXQ/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0SW5kZXggIT09IGN1ckluZGV4KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBubywgd2UgYXJlIG5vdC4gbG9vcCBhZ2Fpbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uTG9vcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5ZXMsIHdlJ3JlIGhlcmUuIHJlc29sdmUgcHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmZC5yZXNvbHZlKGN1ckluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vIGJlZ2luIGxvb3BcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25Mb29wKCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gbm8gYW5pbWF0aW9uLCBqdXN0IGNoYW5nZSB0aGUgY3VycmVudCBpbmRleCBhbmQgc2hvdyBpdC5cclxuICAgICAgICAgICAgICAgIGN1ckluZGV4ID0gdGFyZ2V0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICBzaG93Q3VycmVudCgpO1xyXG4gICAgICAgICAgICAgICAgZGZkLnJlc29sdmUoY3VySW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG5vdCBjaGFuZ2luZyBzbGlkZXNcclxuICAgICAgICAgICAgZGZkLnJlc29sdmUoY3VySW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGZkLnByb21pc2U7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB0cmFuc2l0aW9uTmV4dCAoYW5pbWF0ZSkge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5UcmFuc2l0aW9ucyB0byB0aGUgbmV4dCBzbGlkZS48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYW5pbWF0ZVwiIHR5cGU9XCJCb29sZWFuXCI+T3B0aW9uYWwuIElmIHRydWUgYW5pbWF0ZXMgdGhlIHRyYW5zaXRpb25zLiBEZWZhdWx0OiBhbmltYXRlRGVmYXVsdDs8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJuIHR5cGU9XCJQcm9taXNlXCI+UmVzb2x2ZXMgYWZ0ZXIgYWxsIGFuaW1hdGlvbnMsIHJldHVybnMgbmV3IGluZGV4LjwvcmV0dXJuPlxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0eXBlb2YgYW5pbWF0ZSAhPT0gXCJib29sZWFuXCIpIGFuaW1hdGUgPSBhbmltYXRlRGVmYXVsdDtcclxuXHJcbiAgICAgICAgdmFyIGRmZCA9IG5ldyBEZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICBzbGlkZXMgPSBkb20ubGlzdC5jaGlsZHJlbixcclxuICAgICAgICAgICAgbGVuZ3RoID0gc2xpZGVzLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBtYWtlIHN1cmUgY3VycmVudCBpbmRleCBpcyB3aXRoaW4gbGltaXRzXHJcbiAgICAgICAgaWYgKGN1ckluZGV4IDwgMCkgY3VySW5kZXggPSAwO1xyXG4gICAgICAgIGlmIChjdXJJbmRleCA+PSBsZW5ndGgpIGN1ckluZGV4ID0gbGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgdmFyIG5leHRJbmRleCA9IE1hdGgubWF4KGN1ckluZGV4ICsgMSwgMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIG5leHQgaW5kZXggaXMgd2l0aGluIGxpbWl0c1xyXG4gICAgICAgIGlmIChpbmZpbml0ZSkge1xyXG4gICAgICAgICAgICBpZiAobmV4dEluZGV4ID49IGxlbmd0aCkgbmV4dEluZGV4ID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobmV4dEluZGV4ID49IGxlbmd0aCkgbmV4dEluZGV4ID0gbGVuZ3RoIC0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyaWdnZXJDYWxsYmFjayhcIm5leHRcIiwgW2N1ckluZGV4LCBuZXh0SW5kZXgsIGRvbS5saXN0LmNoaWxkcmVuXSwgZG9tLmxpc3QuY2hpbGRyZW5bbmV4dEluZGV4XSk7XHJcblxyXG4gICAgICAgIC8vIGFyZSB3ZSB0cmFuc2l0aW9uaW5nIHRvIGEgZGlmZmVyZW50IHNsaWRlP1xyXG4gICAgICAgIGlmIChuZXh0SW5kZXggIT09IGN1ckluZGV4KSB7XHJcbiAgICAgICAgICAgIC8vIHllcywgd2UgYXJlIHRyYW5zaXRpb25pbmcuXHJcbiAgICAgICAgICAgIC8vIGRvIHdlIGFuaW1hdGUgdGhlIHRyYW5zaXRpb24/XHJcbiAgICAgICAgICAgIGlmIChhbmltYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB5ZXMsIGFuaW1hdGUgdGhlIHRyYW5zaXRpb24uXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjbGFzcyB0byBkaXNwbGF5IHRoZSBuZXh0IHNsaWRlXHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhzbGlkZXNbbmV4dEluZGV4XSwgY3NzLm5leHRGb2N1cyk7XHJcbiAgICAgICAgICAgICAgICAvLyBwbGFjZSB0aGUgbmV4dCBzbGlkZSB0byB0aGUgcmlnaHQgb2YgdGhlIGN1cnJlbnRcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRXaWR0aCA9IGdldFdpZHRoKHNsaWRlc1tuZXh0SW5kZXhdKSwgICAgLy8gd2lkdGggaXMgZm9yIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEhlaWdodCA9IGdldEhlaWdodChzbGlkZXNbbmV4dEluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNbbmV4dEluZGV4XS5zdHlsZS5sZWZ0ID0gdGFyZ2V0V2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAvL3NsaWRlc1tuZXh0SW5kZXhdLnN0eWxlLndpZHRoID0gdGFyZ2V0V2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAvL3NsaWRlc1tuZXh0SW5kZXhdLnN0eWxlLmhlaWdodCA9IHRhcmdldEhlaWdodCArIFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBhbmltYXRlIHRoZSBmcmFtZSBzaXplIGNvbmN1cnJlbnRseSB3aXRoIHRoZSBzbGlkZSB0cmFuc2l0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzaXplRnJhbWUpIHNldENvbnRhaW5lckRpbWVuc2lvbnMoc2xpZGVzW25leHRJbmRleF0sIGFuaW1hdGUpO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uKHNsaWRlc1tjdXJJbmRleF0sIFwibGVmdFwiLCAoMCAtIHRhcmdldFdpZHRoKSArIFwicHhcIiwgYW5pbWF0aW9uRHVyYXRpb24pLnRoZW4oZnVuY3Rpb24oZWxlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZWxlbSwgY3NzLmZvY3VzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uKHNsaWRlc1tuZXh0SW5kZXhdLCBcImxlZnRcIiwgXCIwcHhcIiwgYW5pbWF0aW9uRHVyYXRpb24pLnRoZW4oZnVuY3Rpb24oZWxlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoZWxlbSwgY3NzLmZvY3VzKTtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhlbGVtLCBjc3MubmV4dEZvY3VzKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJJbmRleCA9IG5leHRJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICBkZmQucmVzb2x2ZShjdXJJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHNldEFjdGl2ZU5hdkRvdChuZXh0SW5kZXgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gbm8gYW5pbWF0aW9uLCBqdXN0IGNoYW5nZSB0aGUgY3VycmVudCBpbmRleCBhbmQgc2hvdyBpdC5cclxuICAgICAgICAgICAgICAgIGN1ckluZGV4ID0gbmV4dEluZGV4O1xyXG4gICAgICAgICAgICAgICAgc2hvd0N1cnJlbnQoKTtcclxuICAgICAgICAgICAgICAgIGRmZC5yZXNvbHZlKGN1ckluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBub3QgY2hhbmdpbmcgc2xpZGVzXHJcbiAgICAgICAgICAgIGRmZC5yZXNvbHZlKGN1ckluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdHJhbnNpdGlvblByZXYgKGFuaW1hdGUpIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+VHJhbnNpdGlvbnMgdG8gdGhlIHByZXZpb3VzIHNsaWRlLjwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJhbmltYXRlXCIgdHlwZT1cIkJvb2xlYW5cIj5PcHRpb25hbC4gSWYgdHJ1ZSBhbmltYXRlcyB0aGUgdHJhbnNpdGlvbnMuIERlZmF1bHQ6IGFuaW1hdGVEZWZhdWx0OzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm4gdHlwZT1cIlByb21pc2VcIj5SZXNvbHZlcyBhZnRlciBhbGwgYW5pbWF0aW9ucywgcmV0dXJucyBuZXcgaW5kZXguPC9yZXR1cm4+XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHR5cGVvZiBhbmltYXRlICE9PSBcImJvb2xlYW5cIikgYW5pbWF0ZSA9IGFuaW1hdGVEZWZhdWx0O1xyXG5cclxuICAgICAgICB2YXIgZGZkID0gbmV3IERlZmVycmVkKCksXHJcbiAgICAgICAgICAgIHNsaWRlcyA9IGRvbS5saXN0LmNoaWxkcmVuLFxyXG4gICAgICAgICAgICBsZW5ndGggPSBzbGlkZXMubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIG1ha2Ugc3VyZSBjdXJyZW50IGluZGV4IGlzIHdpdGhpbiBsaW1pdHNcclxuICAgICAgICBpZiAoY3VySW5kZXggPCAwKSBjdXJJbmRleCA9IDA7XHJcbiAgICAgICAgaWYgKGN1ckluZGV4ID49IGxlbmd0aCkgY3VySW5kZXggPSBsZW5ndGggLSAxO1xyXG5cclxuICAgICAgICB2YXIgbmV4dEluZGV4ID0gY3VySW5kZXggLSAxO1xyXG5cclxuICAgICAgICAvLyBtYWtlIHN1cmUgbmV4dCBpbmRleCBpcyB3aXRoaW4gbGltaXRzXHJcbiAgICAgICAgaWYgKGluZmluaXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPCAwKSBuZXh0SW5kZXggPSBsZW5ndGggLSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPCAwKSBuZXh0SW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJpZ2dlckNhbGxiYWNrKFwicHJldlwiLCBbY3VySW5kZXgsIG5leHRJbmRleCwgZG9tLmxpc3QuY2hpbGRyZW5dLCBkb20ubGlzdC5jaGlsZHJlbltuZXh0SW5kZXhdKTtcclxuXHJcbiAgICAgICAgLy8gYXJlIHdlIHRyYW5zaXRpb25pbmcgdG8gYSBkaWZmZXJlbnQgc2xpZGU/XHJcbiAgICAgICAgaWYgKG5leHRJbmRleCAhPT0gY3VySW5kZXgpIHtcclxuICAgICAgICAgICAgLy8geWVzLCB3ZSBhcmUgdHJhbnNpdGlvbmluZy5cclxuICAgICAgICAgICAgLy8gZG8gd2UgYW5pbWF0ZSB0aGUgdHJhbnNpdGlvbj9cclxuICAgICAgICAgICAgaWYgKGFuaW1hdGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHllcywgYW5pbWF0ZSB0aGUgdHJhbnNpdGlvbi5cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHRvIGRpc3BsYXkgdGhlIG5leHQgc2xpZGVcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKHNsaWRlc1tuZXh0SW5kZXhdLCBjc3MubmV4dEZvY3VzKTtcclxuICAgICAgICAgICAgICAgIC8vIHBsYWNlIHRoZSBuZXh0IHNsaWRlIHRvIHRoZSBsZWZ0IG9mIHRoZSBjdXJyZW50XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0V2lkdGggPSBnZXRXaWR0aChzbGlkZXNbbmV4dEluZGV4XSksICAgIC8vIHdpZHRoIGlzIGZvciB0YXJnZXRcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRIZWlnaHQgPSBnZXRIZWlnaHQoc2xpZGVzW25leHRJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzW25leHRJbmRleF0uc3R5bGUubGVmdCA9ICgwIC0gdGFyZ2V0V2lkdGgpICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgLy9zbGlkZXNbbmV4dEluZGV4XS5zdHlsZS53aWR0aCA9IHRhcmdldFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgLy9zbGlkZXNbbmV4dEluZGV4XS5zdHlsZS5oZWlnaHQgPSB0YXJnZXRIZWlnaHQgKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYW5pbWF0ZSB0aGUgZnJhbWUgc2l6ZSBjb25jdXJyZW50bHkgd2l0aCB0aGUgc2xpZGUgdHJhbnNpdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc2l6ZUZyYW1lKSBzZXRDb250YWluZXJEaW1lbnNpb25zKHNsaWRlc1tuZXh0SW5kZXhdLCBhbmltYXRlKTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbihzbGlkZXNbY3VySW5kZXhdLCBcImxlZnRcIiwgdGFyZ2V0V2lkdGggKyBcInB4XCIsIGFuaW1hdGlvbkR1cmF0aW9uKS50aGVuKGZ1bmN0aW9uKGVsZW0pe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGVsZW0sIGNzcy5mb2N1cyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbihzbGlkZXNbbmV4dEluZGV4XSwgXCJsZWZ0XCIsIFwiMHB4XCIsIGFuaW1hdGlvbkR1cmF0aW9uKS50aGVuKGZ1bmN0aW9uKGVsZW0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKGVsZW0sIGNzcy5mb2N1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZWxlbSwgY3NzLm5leHRGb2N1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VySW5kZXggPSBuZXh0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgZGZkLnJlc29sdmUoY3VySW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBzZXRBY3RpdmVOYXZEb3QobmV4dEluZGV4KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIG5vIGFuaW1hdGlvbiwganVzdCBjaGFuZ2UgdGhlIGN1cnJlbnQgaW5kZXggYW5kIHNob3cgaXQuXHJcbiAgICAgICAgICAgICAgICBjdXJJbmRleCA9IG5leHRJbmRleDtcclxuICAgICAgICAgICAgICAgIHNob3dDdXJyZW50KCk7XHJcbiAgICAgICAgICAgICAgICBkZmQucmVzb2x2ZShjdXJJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbm90IGNoYW5naW5nIHNsaWRlc1xyXG4gICAgICAgICAgICBkZmQucmVzb2x2ZShjdXJJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBOQVY6IE5FWFQsIFBSRVYsIERPVFNcclxuICAgIGZ1bmN0aW9uIGNyZWF0ZU5hdmlnYXRpb25FbGVtZW50cyAoKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PkNyZWF0ZXMgdGhlIG5leHQsIHByZXYgYW5kIGRvdCBuYXZpZ2F0aW9uLjwvc3VtbWFyeT5cclxuICAgICAgICBcclxuICAgICAgICBpZiAobmF2UHJldiB8fCBuYXZOZXh0IHx8IG5hdkRvdHMpe1xyXG4gICAgICAgICAgICBkb20ubmF2Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IFwiY2xhc3NcIjogY3NzLm5hdkNvbnRhaW5lciB9KTtcclxuICAgICAgICAgICAgdmFyIG5hdkJhciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBcImNsYXNzXCI6IGNzcy5uYXZCYXIgfSksXHJcbiAgICAgICAgICAgICAgICBwcmV2Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IFwiY2xhc3NcIjogY3NzLm5hdlByZXZDb250YWluZXIgfSksXHJcbiAgICAgICAgICAgICAgICBuZXh0Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IFwiY2xhc3NcIjogY3NzLm5hdk5leHRDb250YWluZXIgfSksXHJcbiAgICAgICAgICAgICAgICBkb3RzQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IFwiY2xhc3NcIjogY3NzLm5hdkRvdHNDb250YWluZXIgfSksXHJcbiAgICAgICAgICAgICAgICBwcmV2QnV0dG9uLCBuZXh0QnV0dG9uO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBpZiAobmF2UHJldikge1xyXG4gICAgICAgICAgICAgICAgcHJldkJ1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBcImNsYXNzXCI6IGNzcy5uYXZQcmV2IH0pO1xyXG4gICAgICAgICAgICAgICAgcHJldkNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmV2QnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIHByZXZDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHByZXZCdXR0b25fY2xpY2ssIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmF2RG90cykge1xyXG4gICAgICAgICAgICAgICAgZG9tLm5hdkRvdHMgPSBjcmVhdGVFbGVtZW50KFwidWxcIiwgeyBcImNsYXNzXCI6IGNzcy5uYXZEb3RzIH0pO1xyXG4gICAgICAgICAgICAgICAgZG90c0NvbnRhaW5lci5hcHBlbmRDaGlsZChkb20ubmF2RG90cyk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJOYXZEb3RzKCk7XHJcbiAgICAgICAgICAgICAgICBzZXRBY3RpdmVOYXZEb3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmF2TmV4dCkge1xyXG4gICAgICAgICAgICAgICAgbmV4dEJ1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBcImNsYXNzXCI6IGNzcy5uYXZOZXh0IH0pO1xyXG4gICAgICAgICAgICAgICAgbmV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChuZXh0QnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIG5leHRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG5leHRCdXR0b25fY2xpY2ssIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdGhlIG5hdmlnYXRpb24gYmFyIHRvZ2V0aGVyXHJcbiAgICAgICAgICAgIGlmIChuYXZPdmVybGF5KSBhZGRDbGFzcyhkb20ubmF2Q29udGFpbmVyLCBjc3MubmF2T3ZlcmxheSk7XHJcbiAgICAgICAgICAgIGlmIChuYXZPdmVybGF5ICYmIG5hdkF1dG9IaWRlKSBhZGRDbGFzcyhkb20ubmF2Q29udGFpbmVyLCBjc3MubmF2QXV0b0hpZGUpO1xyXG4gICAgICAgICAgICBuYXZCYXIuYXBwZW5kQ2hpbGQocHJldkNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIG5hdkJhci5hcHBlbmRDaGlsZChkb3RzQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgbmF2QmFyLmFwcGVuZENoaWxkKG5leHRDb250YWluZXIpO1xyXG4gICAgICAgICAgICBkb20ubmF2Q29udGFpbmVyLmFwcGVuZENoaWxkKG5hdkJhcik7XHJcblxyXG4gICAgICAgICAgICB0cmlnZ2VyQ2FsbGJhY2soXCJuYXZCYXJfcmVuZGVyXCIsIFtjdXJJbmRleCwgbmF2QmFyXSwgZG9tLm5hdkNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBpZiAoZG9tLm5hdlRhcmdldCA9PT0gbnVsbCAmJiAhbmF2T3ZlcmxheSkgYWRkQ2xhc3MoZG9tLmNvbnRhaW5lciwgY3NzLm5hdkFwcGVuZCk7XHJcbiAgICAgICAgICAgIChkb20ubmF2VGFyZ2V0IHx8IGRvbS5jb250YWluZXIpLmFwcGVuZENoaWxkKGRvbS5uYXZDb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gbmF2IGZ1bmN0aW9uc1xyXG4gICAgZnVuY3Rpb24gcmVuZGVyTmF2RG90cyAoKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PihyZSlDcmVhdGVzIG5hdmlnYXRpb24gZG90cy4gQXNzdW1lcyBjb250YWluZXIgaXMgYWxyZWFkeSBjcmVhdGVkLjwvc3VtbWFyeT5cclxuICAgICAgICBcclxuICAgICAgICAvLyB3ZSBjYW4ndCAocmUtKXJlbmRlciBkb3RzIGlmIHRoZXJlIGlzbid0IGEgY29udGFpbmVyIHRvIHJlbmRlciB0by5cclxuICAgICAgICBpZiAoIShkb20ubmF2RG90cyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgc2xpZGVzID0gZG9tLmxpc3QuY2hpbGRyZW4sXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHNsaWRlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGRvbS5uYXZEb3RzLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGRvdCA9IGNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7IFwiY2xhc3NcIjogY3NzLm5hdkRvdCwgXCJkYXRhLWluZGV4XCI6IGkgfSk7XHJcbiAgICAgICAgICAgIGRvdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbmF2RG90c19jbGljaywgZmFsc2UpO1xyXG4gICAgICAgICAgICBkb20ubmF2RG90cy5hcHBlbmQoZG90KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZXRBY3RpdmVOYXZEb3QgKGluZGV4KSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlNldHMgdGhlIGN1cnJlbnQgc2xpZGUncyBjb3JyZWxhdGVkIGRvdCBhcyBhY3RpdmUuPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImluZGV4XCIgdHlwZT1cIk51bWJlclwiPk9wdGlvbmFsLiBEb3QgdG8gc2VsZWN0LjwvcGFyYW0+XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gd2UgY2FuJ3Qgc2V0IGFjdGl2ZSBkb3RzIGlmIHRoZXJlIGFyZSBubyBkb3RzIHRvIHNldC5cclxuICAgICAgICBpZiAoIShkb20ubmF2RG90cyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGluZGV4ICE9PSBcIm51bWJlclwiKSBpbmRleCA9IGN1ckluZGV4O1xyXG5cclxuICAgICAgICB2YXIgc2xpZGVzID0gZG9tLmxpc3QuY2hpbGRyZW4sXHJcbiAgICAgICAgICAgIGRvdHMgPSBkb20ubmF2RG90cy5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHNsaWRlcyBhbmQgZG90cyBjb3JyZWxhdGUuXHJcbiAgICAgICAgaWYgKHNsaWRlcy5sZW5ndGggIT09IGRvdHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJlbmRlck5hdkRvdHMoKTtcclxuICAgICAgICAgICAgc2V0QWN0aXZlTmF2RG90KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG5vIHNsaWRlcywgbm8gZG90cyB0byBzZXRcclxuICAgICAgICBpZiAoc2xpZGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBtYWtlIHN1cmUgY3VycmVudCBpbmRleCBpcyB3aXRoaW4gbGltaXRzXHJcbiAgICAgICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSAwO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSBkb3RzLmxlbmd0aCkgaW5kZXggPSBkb3RzLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSB0aGFuIGFkZCBhY3RpdmUgZG90IGNsYXNzXHJcbiAgICAgICAgcmVtb3ZlQ2xhc3MoZG90cywgY3NzLm5hdkRvdEFjdGl2ZSk7XHJcbiAgICAgICAgYWRkQ2xhc3MoZG90c1tpbmRleF0sIGNzcy5uYXZEb3RBY3RpdmUpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc3RhcnRBdXRvUm90YXRlICgpIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+U3RhcnRzIHRoZSBhdXRvLXJvdGF0ZSB0aW1lci4gUm90YXRlcyB0aGUgc2xpZGVzLjwvc3VtbWFyeT5cclxuICAgICAgICBcclxuICAgICAgICBzdG9wQXV0b1JvdGF0ZSgpO1xyXG4gICAgICAgIHRpbWVyLmF1dG9Sb3RhdGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHN0b3BBdXRvUm90YXRlKCk7XHJcbiAgICAgICAgICAgIHZhciBjb250aW51ZV9yb3RhdGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckNhbGxiYWNrKFwicm90YXRlXCIsIFtjdXJJbmRleCwgZG9tLmxpc3QuY2hpbGRyZW5dLCBkb20ubGlzdC5jaGlsZHJlbltjdXJJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRBdXRvUm90YXRlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChpbmZpbml0ZSkge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbk5leHQoKS50aGVuKGNvbnRpbnVlX3JvdGF0ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1ckluZGV4ID49IChkb20ubGlzdC5jaGlsZHJlbi5sZW5ndGggLTEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblRvKDApLnRoZW4oY29udGludWVfcm90YXRlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbk5leHQoKS50aGVuKGNvbnRpbnVlX3JvdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBhdXRvUm90YXRlRGVsYXlNaWxsaXNlY29uZHMpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc3RvcEF1dG9Sb3RhdGUgKCkge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5TdG9wcyBhdXRvLXJvdGF0ZSB0aW1lci48L3N1bW1hcnk+XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyLmF1dG9Sb3RhdGUpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uIG5hdiBmdW5jdGlvbnNcclxuXHJcbiAgICAvLyNyZWdpb24gbmF2IGV2ZW50IGhhbmRsZXJzXHJcbiAgICBmdW5jdGlvbiBuZXh0QnV0dG9uX2NsaWNrIChldnQpIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+TmF2aWdhdGlvbiBOZXh0IEJ1dHRvbiBjbGljayBldmVudCBoYW5kbGVyLCBtb3ZlcyB0byB0aGUgbmV4dCBzbGlkZS48L3N1bW1hcnk+XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3RvcEF1dG9Sb3RhdGUoKTtcclxuXHJcbiAgICAgICAgdmFyIGV2ZW50ID0gZXZ0IHx8IHdpbmRvdy5ldmVudCxcclxuICAgICAgICAgICAgZWxlbSA9IGV2dC50YXJnZXQgfHwgZXZ0LnNyY0VsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRyaWdnZXJDYWxsYmFjayhcIm5leHRfY2xpY2tcIiwgW2V2ZW50LCBjdXJJbmRleCwgZG9tLm5hdkNvbnRhaW5lcl0sIGVsZW0pO1xyXG5cclxuICAgICAgICB0cmFuc2l0aW9uTmV4dCgpLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdHJpZ2dlckNhbGxiYWNrKFwibmV4dF9jbGlja2VkXCIsIFtldmVudCwgY3VySW5kZXgsIGRvbS5uYXZDb250YWluZXJdLCBlbGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHByZXZCdXR0b25fY2xpY2sgKGV2dCkge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5OYXZpZ2F0aW9uIFByZXYgQnV0dG9uIGNsaWNrIGV2ZW50IGhhbmRsZXIsIG1vdmVzIHRvIHRoZSBuZXh0IHNsaWRlLjwvc3VtbWFyeT5cclxuICAgICAgICBcclxuICAgICAgICBzdG9wQXV0b1JvdGF0ZSgpO1xyXG5cclxuICAgICAgICB2YXIgZXZlbnQgPSBldnQgfHwgd2luZG93LmV2ZW50LFxyXG4gICAgICAgICAgICBlbGVtID0gZXZ0LnRhcmdldCB8fCBldnQuc3JjRWxlbWVudDtcclxuXHJcbiAgICAgICAgdHJpZ2dlckNhbGxiYWNrKFwicHJldl9jbGlja1wiLCBbZXZlbnQsIGN1ckluZGV4LCBkb20ubmF2Q29udGFpbmVyXSwgZWxlbSk7XHJcblxyXG4gICAgICAgIHRyYW5zaXRpb25QcmV2KCkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0cmlnZ2VyQ2FsbGJhY2soXCJwcmV2X2NsaWNrZWRcIiwgW2V2ZW50LCBjdXJJbmRleCwgZG9tLm5hdkNvbnRhaW5lcl0sIGVsZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbmF2RG90c19jbGljayAoZXZ0KSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5Pk5hdmlnYXRpb24gRG90cyBjbGljayBldmVudCBoYW5kbGVyLCBtb3ZlcyB0byB0aGUgbmV4dCBzbGlkZS48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiZXZ0XCIgdHlwZT1cIk9iamVjdFwiPkV2ZW50IG9iamVjdC48L3BhcmFtPlxyXG4gICAgICAgIFxyXG4gICAgICAgIHN0b3BBdXRvUm90YXRlKCk7XHJcblxyXG4gICAgICAgIHZhciBldmVudCA9IGV2dCB8fCB3aW5kb3cuZXZlbnQsXHJcbiAgICAgICAgICAgIGVsZW0gPSBldnQudGFyZ2V0IHx8IGV2dC5zcmNFbGVtZW50LFxyXG4gICAgICAgICAgICBuZHggPSBwYXJzZUludChlbGVtLmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIikgfHwgLTEsIDEwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgdHJpZ2dlckNhbGxiYWNrKFwiZG90c19jbGlja1wiLCBbZXZlbnQsIG5keCwgZG9tLm5hdkNvbnRhaW5lcl0sIGVsZW0pO1xyXG5cclxuICAgICAgICBpZiAobmR4ID4gLTEpIHRyYW5zaXRpb25UbyhuZHgpLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdHJpZ2dlckNhbGxiYWNrKFwiZG90c19jbGlja2VkXCIsIFtldmVudCwgY3VySW5kZXgsIGRvbS5uYXZDb250YWluZXJdLCBlbGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvbiBuYXYgZXZlbnQgaGFuZGxlcnNcclxuICAgIC8vI2VuZHJlZ2lvbiBOQVY6IE5FWFQsIFBSRVYsIERPVFNcclxuXHJcbiAgICAvLyNyZWdpb24gSEVMUEVSU1xyXG4gICAgZnVuY3Rpb24gdHJpZ2dlckNhbGxiYWNrIChrZXksIHBhcmFtLCBjdHgpIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+PC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImtleVwiIHR5cGU9XCJTdHJpbmdcIj5SZWdpc3RlcmVkIENhbGxiYWNrIHRvIHRyaWdnZXIuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJwYXJhbVwiIHR5cGU9XCJBcnJheVwiPkFyZ3VtZW50cyB0byBwYXNzLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiY3R4XCIgdHlwZT1cIk9iamVjdFwiPkNvbnRleHQgZm9yIGNhbGwuPC9wYXJhbT5cclxuICAgICAgICBcclxuICAgICAgICBpZiAoY2FsbGJhY2suaGFzT3duUHJvcGVydHkoa2V5KSAmJiB0eXBlb2YgY2FsbGJhY2tba2V5XSA9PT0gXCJmdW5jdGlvblwiKXtcclxuICAgICAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tba2V5XS5hcHBseShjdHgsIHBhcmFtKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25zb2xlKSBjb25zb2xlLmVycm9yKFwiU2ltcGxlQ2Fyb3VzZWw6IEFuIGVycm9yIG9jY3VyZWQgd2hpbGUgZXhlY3V0aW5nICdcIiArIGtleSArIFwiJyBjYWxsYmFjazogXCIsIGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlZHJhdyAoKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlJlZHJhd3MgdGhlIGNvbnRhaW5lciBkaW1lbnNpb25zIGFuZCBuYXZpZ2F0aW9uIGRvdHMuPC9zdW1tYXJ5PlxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBzbGlkZXMgPSBkb20ubGlzdC5jaGlsZHJlbixcclxuICAgICAgICAgICAgbGVuZ3RoID0gc2xpZGVzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIGN1cnJlbnQgaW5kZXggaXMgd2l0aGluIGxpbWl0c1xyXG4gICAgICAgIGlmIChjdXJJbmRleCA8IDApIGN1ckluZGV4ID0gMDtcclxuICAgICAgICBpZiAoY3VySW5kZXggPj0gbGVuZ3RoKSBjdXJJbmRleCA9IGxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgIC8vIGFkZCBjbGFzc2VzXHJcbiAgICAgICAgYWRkQ2xhc3MoZG9tLmNvbnRhaW5lciwgY3NzLmNvbnRhaW5lcik7XHJcbiAgICAgICAgYWRkQ2xhc3MoZG9tLmxpc3QsIGNzcy5saXN0KTtcclxuICAgICAgICBhZGRDbGFzcyhkb20ubGlzdC5jaGlsZHJlbiwgY3NzLnNsaWRlKTtcclxuXHJcbiAgICAgICAgaWYgKHJlc2l6ZUZyYW1lKSBzZXRDb250YWluZXJEaW1lbnNpb25zKHNsaWRlc1tjdXJJbmRleF0pO1xyXG4gICAgICAgIGlmICghZG9tLm5hdkNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBjcmVhdGVOYXZpZ2F0aW9uRWxlbWVudHMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZW5kZXJOYXZEb3RzKCk7XHJcbiAgICAgICAgICAgIHNldEFjdGl2ZU5hdkRvdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZXRDb250YWluZXJEaW1lbnNpb25zIChzbGlkZXMsIGFuaW1hdGUpIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+Q2hhbmdlcyB0aGUgd2lkdGggYW5kIGhlaWdodCB0byBtYXRjaCB0aGUgc2xpZGVzIHBhc3NlZC48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2xpZGVzXCIgdHlwZT1cIkNvbGxlY3Rpb25cIj5IVE1MIENvbGxlY3Rpb24gb3IgQXJyYXk8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImFuaW1hdGVcIiB0eXBlPVwiQm9vbGVhblwiPk9wdGlvbmFsLiBJZiB0cnVlLCBkaW1lbnNpb25zIHdpbGwgYmUgYW5pbWF0ZWQuIERlZmF1bHQ6IGFuaW1hdGVEZWZhdWx0OzwvcGFyYW0+XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHR5cGVvZiBhbmltYXRlICE9PSBcImJvb2xlYW5cIikgYW5pbWF0ZSA9IGFuaW1hdGVEZWZhdWx0O1xyXG5cclxuICAgICAgICB2YXIgbWF4V2lkdGggPSB3aWR0aCwgbWF4SGVpZ2h0ID0gaGVpZ2h0LCBcclxuICAgICAgICAgICAgZWxlbXMgPSAoIXNsaWRlcy5oYXNPd25Qcm9wZXJ0eShsZW5ndGgpKSA/IFtzbGlkZXNdIDogc2xpZGVzO1xyXG5cclxuICAgICAgICAvLyBsb29wIHRocnUgYWxsIHRoZSBjaGlsZHJlbiBhbmQgc2V0IGRpbWVuc2lvbnNcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtID0gZWxlbXNbaV07XHJcbiAgICAgICAgICAgIG1heFdpZHRoID0gTWF0aC5tYXgobWF4V2lkdGgsIGdldFdpZHRoKGVsZW0pKTtcclxuICAgICAgICAgICAgbWF4SGVpZ2h0ID0gTWF0aC5tYXgobWF4SGVpZ2h0LCBnZXRIZWlnaHQoZWxlbSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGFuaW1hdGUpIHtcclxuICAgICAgICAgICAgQW5pbWF0aW9uKGRvbS5jb250YWluZXIsIFwid2lkdGhcIiwgbWF4V2lkdGggKyBcInB4XCIpO1xyXG4gICAgICAgICAgICBBbmltYXRpb24oZG9tLmNvbnRhaW5lciwgXCJoZWlnaHRcIiwgbWF4SGVpZ2h0ICsgXCJweFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb20uY29udGFpbmVyLnN0eWxlLndpZHRoID0gbWF4V2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgIGRvbS5jb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gbWF4SGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFkZENsYXNzIChlbGVtcywgY2xhc3NuYW1lcykge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5BZGRzIENTUyBjbGFzcyBuYW1lcyB0byBhbiBlbGVtZW50Ljwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJlbGVtc1wiIHR5cGU9XCJPYmplY3QgfHwgQXJyYXlcIj5UYXJnZXQocykgZWxlbWVudC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNsYXNzbmFtZVwiIHR5cGU9XCJTdHJpbmcgfHwgQXJyYXlcIj5DbGFzcyBuYW1lIHRvIGFkZC4gaWYgU3RyaW5nLCBzZXBhcmF0ZSBlYWNoIGNsYXNzIG5hbWUgYnkgYSBzcGFjZS48L3BhcmFtPlxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGNsYXNzbmFtZXMgPT09IFwic3RyaW5nXCIpIGNsYXNzbmFtZXMgPSBbY2xhc3NuYW1lc107XHJcbiAgICAgICAgaWYgKCEoY2xhc3NuYW1lcyBpbnN0YW5jZW9mIEFycmF5KSkgcmV0dXJuO1xyXG4gICAgICAgIGlmICghaXNIdG1sQ29sbGVjdGlvblR5cGVzKGVsZW1zKSkgZWxlbXMgPSBbZWxlbXNdO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzbmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gY2xhc3NuYW1lc1tpXS5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBjbGFzc2VzLmxlbmd0aDsgaWkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBjbGFzc2VzW2lpXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpaSA9IDA7IGlpaSA8IGVsZW1zLmxlbmd0aDsgaWlpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGVsZW1zW2lpaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgJiYgIWhhc0NsYXNzKGVsZW0sIG5hbWUpKSBlbGVtLmNsYXNzTGlzdC5hZGQobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZW1vdmVDbGFzcyAoZWxlbXMsIGNsYXNzbmFtZXMpIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+UmVtb3ZlcyBDU1MgY2xhc3MgbmFtZXMgZnJvbSBhbiBlbGVtZW50Ljwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJlbGVtc1wiIHR5cGU9XCJPYmplY3QgfHwgQXJyYXlcIj5UYXJnZXQocykgZWxlbWVudC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNsYXNzbmFtZVwiIHR5cGU9XCJTdHJpbmcgfHwgQXJyYXlcIj5DbGFzcyBuYW1lIHRvIGFkZC4gSWYgU3RyaW5nLCBzZXBhcmF0ZSBlYWNoIGNsYXNzIG5hbWUgYnkgYSBzcGFjZS48L3BhcmFtPlxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGNsYXNzbmFtZXMgPT09IFwic3RyaW5nXCIpIGNsYXNzbmFtZXMgPSBbY2xhc3NuYW1lc107XHJcbiAgICAgICAgaWYgKCEoY2xhc3NuYW1lcyBpbnN0YW5jZW9mIEFycmF5KSkgcmV0dXJuO1xyXG4gICAgICAgIGlmICghaXNIdG1sQ29sbGVjdGlvblR5cGVzKGVsZW1zKSkgZWxlbXMgPSBbZWxlbXNdO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzbmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gY2xhc3NuYW1lc1tpXS5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBjbGFzc2VzLmxlbmd0aDsgaWkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBjbGFzc2VzW2lpXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpaSA9IDA7IGlpaSA8IGVsZW1zLmxlbmd0aDsgaWlpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGVsZW1zW2lpaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgJiYgaGFzQ2xhc3MoZWxlbSwgbmFtZSkpIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGhhc0NsYXNzIChlbGVtLCBjbGFzc25hbWUpIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+Q2hlY2tzIHRvIHNlZSBpZiBlbGVtZW50IGhhcyB0aGUgQ1NTIGNsYXNzIG5hbWUuPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImVsZW1cIiB0eXBlPVwiT2JqZWN0XCI+VGFyZ2V0IGVsZW1lbnQuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjbGFzc25hbWVcIiB0eXBlPVwiU3RyaW5nXCI+U2luZ2xlIGNsYXNzIG5hbWUgdG8gY2hlY2suPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybiB0eXBlPVwiQm9vbGVhblwiPlJldHVybnMgdHJ1ZSBpZiBlbGVtZW50IGFscmVhZHkgaGFzIHRoaXMgY2xhc3MuPC9yZXR1cm4+XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzbmFtZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpc0h0bWxDb2xsZWN0aW9uVHlwZXMgKGVsZW1zKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PkNoZWNrcyB0byBzZWUgaWYgdGhlICdlbGVtcycgaXMgYW55IHR5cGUgb2YgSFRNTCBjb2xsZWN0aW9uLjwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJlbGVtc1wiIHR5cGU9XCJPYmplY3RcIj5PYmplY3QgdG8gY2hlY2suPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybiB0eXBlPVwiQm9vbGVhblwiPlRydWUgaWYgaXQgaXMgYSBjb2xsZWN0aW9uIHR5cGU8L3JldHVybj5cclxuICAgICAgICBcclxuICAgICAgICAvLyBjaGVjayBnZW5lcmljIHR5cGVzIGZpcnN0LiBpcyBhbiBvYmplY3QgYW5kIGhhcyBcImxlbmd0aFwiIHByb3AuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtcyA9PT0gXCJvYmplY3RcIiAmJiBlbGVtcy5oYXNPd25Qcm9wZXJ0eShcImxlbmd0aFwiKSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gZWxzZSBjaGVjayBleHBsaWNpdCB0eXBlc1xyXG4gICAgICAgIHZhciB0eXBlcyA9IFtBcnJheSwgSFRNTENvbGxlY3Rpb24sIE5vZGVMaXN0XTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtcyBpbnN0YW5jZW9mIHR5cGVzW2ldKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZ2V0V2lkdGggKGVsZW0pIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+R2V0IHRoZSBvdXRlciB3aWR0aCBmb3IgYW4gZWxlbWVudC48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiZWxlbVwiIHR5cGU9XCJPYmplY3RcIj5ET00gZWxlbWVudDwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm4gdHlwZT1cIk51bWJlclwiPldpZHRoIG51bWJlciBpbiBwaXhlbHMuIERvZXMgbm90IGFwcGVuZCBcInB4XCIgdG8gdGhlIHZhbHVlLjwvcmV0dXJuPlxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW0pIHx8IGVsZW0uY3VycmVudFN0eWxlO1xyXG4gICAgICAgIHJldHVybiBlbGVtLm9mZnNldFdpZHRoICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luTGVmdCwgMTApICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luUmlnaHQsIDEwKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldEhlaWdodCAoZWxlbSkge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5HZXQgdGhlIG91dGVyIHdpZHRoIGZvciBhbiBlbGVtZW50Ljwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJlbGVtXCIgdHlwZT1cIk9iamVjdFwiPkRPTSBlbGVtZW50PC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybiB0eXBlPVwiTnVtYmVyXCI+V2lkdGggbnVtYmVyIGluIHBpeGVscy4gRG9lcyBub3QgYXBwZW5kIFwicHhcIiB0byB0aGUgdmFsdWUuPC9yZXR1cm4+XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSkgfHwgZWxlbS5jdXJyZW50U3R5bGU7XHJcbiAgICAgICAgcmV0dXJuIGVsZW0ub2Zmc2V0SGVpZ2h0ICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luVG9wLCAxMCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5Cb3R0b20sIDEwKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIEFuaW1hdGlvbihlbGVtLCBwcm9wLCB2YWx1ZSwgZHVyYXRpb24pIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+QW5pbWF0ZSBlbGVtZW50IHByb3BlcnR5PC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImVsZW1cIiB0eXBlPVwiT2JqZWN0XCI+RE9NIGVsZW1lbnQuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJwcm9wXCIgdHlwZT1cIlN0cmluZ1wiPkNTUyBwcm9wZXJ0eSBuYW1lIHdpdGggbnVtZXJpYyB2YWx1ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInZhbHVlXCIgdHlwZT1cIlN0cmluZ1wiPlRhcmdldCB2YWx1ZSBvZiBwcm9wZXJ0eS4gRXhhbXBsZTogXCIxMDBweFwiPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJkdXJhdGlvblwiIHR5cGU9XCJOdW1iZXJcIj5PcHRpb25hbC4gRHVyYXRpb24gb2YgYW5pbWF0aW9uLiBEZWZhdWx0OiAzMDA7PC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybiB0eXBlPVwiUHJvbWlzZVwiPnByb21pc2U8L3JldHVybj5cclxuICAgICAgICBcclxuICAgICAgICB2YXIgZGZkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wICE9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIGRmZC5yZWplY3QoXCJJbnZhbGlkICdwcm9wJyBhcmd1bWVudCFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFlbGVtLnN0eWxlKSB7XHJcbiAgICAgICAgICAgIGRmZC5yZWplY3QoXCJJbnZhbGlkICdlbGVtJyBhcmd1bWVudCEgTm90IGEgRE9NIG9iamVjdFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGR1cmF0aW9uICE9PSBcIm51bWJlclwiKSBkdXJhdGlvbiA9IDMwMDtcclxuICAgIFxyXG4gICAgICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW0pLFxyXG4gICAgICAgICAgICBjaGFuZ2VQb3NpdGlvbiA9IFtcInRvcFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIiwgXCJyaWdodFwiXSxcclxuICAgICAgICAgICAgZGF0YU9yaWdQb3NpdGlvbiA9IFwiZGF0YS1vcmlnLXBvc2l0aW9uXCI7XHJcbiAgICBcclxuICAgICAgICAvLyBpZiBjaGFuZ2luZyBwb3NpdGlvblxyXG4gICAgICAgIGlmIChjaGFuZ2VQb3NpdGlvbi5pbmRleE9mKHByb3ApID4gLTEpIHtcclxuICAgICAgICAgICAgLy8gc2F2ZSBvcmlnIHBvc2l0aW9uIHZhbHVlIGFuZCBjaGFuZ2UgcG9zaXRpb24gdG8gYWJzb2x1dGUuXHJcbiAgICAgICAgICAgIGlmICghZWxlbS5oYXNBdHRyaWJ1dGUoZGF0YU9yaWdQb3NpdGlvbikpIGVsZW0uc2V0QXR0cmlidXRlKGRhdGFPcmlnUG9zaXRpb24sIHN0eWxlLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICB2YXIgb2xkdGltZXN0YW1wID0gbnVsbCxcclxuICAgICAgICAgICAgcmVFeHQgPSAvW15cXGRdKyQvaSxcclxuICAgICAgICAgICAgZXh0ID0gKHJlRXh0LmV4ZWModmFsdWUgKyBcIlwiKSB8fCBbXCJcIl0pWzBdLFxyXG4gICAgICAgICAgICBzdGFydGluZ1ZhbHVlID0gcGFyc2VJbnQoc3R5bGVbcHJvcF0gfHwgMCwgMTApLFxyXG4gICAgICAgICAgICB0YXJnZXQgPSBwYXJzZUludCh2YWx1ZSwgMTApLFxyXG4gICAgICAgICAgICB1bml0cyA9ICh0YXJnZXQgLSBzdGFydGluZ1ZhbHVlKSAvIGR1cmF0aW9uLFxyXG4gICAgICAgICAgICBtb3ZlVXAgPSAodGFyZ2V0ID49IHN0YXJ0aW5nVmFsdWUpLFxyXG4gICAgICAgICAgICBjdXJWYWwgPSBzdGFydGluZ1ZhbHVlO1xyXG4gICAgXHJcbiAgICAgICAgLy8gaWYgbm8gZXh0ZW5zaW9uIHdhcyBmb3VuZCBvbiB0aGUgdGFyZ2V0IHZhbHVlLCB0cnkgZ2V0dGluZyBpdCBmcm9tIHRoZSBleGlzdGluZyB2YWx1ZVxyXG4gICAgICAgIGlmICghZXh0KSBleHQgPSAocmVFeHQuZXhlYyhzdHlsZVtwcm9wXSkgfHwgW1wiXCJdKVswXTtcclxuICAgIFxyXG4gICAgICAgIC8vIGNhY2hlIHZhbHVlcyBcclxuICAgICAgICB2YXIgZGF0YU9yaWdBdHRyID0gXCJkYXRhLW9yaWctXCIgKyBwcm9wLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgIGRhdGFMYXN0QXR0ciA9IFwiZGF0YS1sYXN0LVwiICsgcHJvcC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGlmICghZWxlbS5oYXNBdHRyaWJ1dGUoZGF0YU9yaWdBdHRyKSkgZWxlbS5zZXRBdHRyaWJ1dGUoZGF0YU9yaWdBdHRyLCBzdGFydGluZ1ZhbHVlICsgZXh0KTtcclxuICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShkYXRhTGFzdEF0dHIsIHN0YXJ0aW5nVmFsdWUgKyBleHQpO1xyXG4gICAgXHJcbiAgICAgICAgLy8gZXhpdCBlYXJseSBpZiBzdGFydGluZyB2YWx1ZSBpcyB0aGUgc2FtZSBhcyB0aGUgdGFyZ2V0IHZhbHVlXHJcbiAgICAgICAgaWYgKHN0YXJ0aW5nVmFsdWUgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICBlbGVtLnN0eWxlW3Byb3BdID0gdGFyZ2V0ICsgKChleHQpID8gZXh0IDowICk7XHJcbiAgICAgICAgICAgIGRmZC5yZXNvbHZlKGVsZW0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGZkLnByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcCh0aW1lc3RhbXApIHtcclxuICAgICAgICAgICAgaWYgKCFvbGR0aW1lc3RhbXApIG9sZHRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcclxuICAgICAgICAgICAgLy8gZ2V0IHRoZSB0aW1lIGRpZmZlcmVuY2UgZnJvbSB0aGUgbGFzdCBmcmFtZVxyXG4gICAgICAgICAgICB2YXIgZ2FwID0gdGltZXN0YW1wIC0gb2xkdGltZXN0YW1wO1xyXG4gICAgICAgICAgICBvbGR0aW1lc3RhbXAgPSB0aW1lc3RhbXA7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSByZW1haW5pbmcgZHVyYXRpb25cclxuICAgICAgICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbiAtIGdhcDtcclxuICAgICAgICAgICAgaWYgKGR1cmF0aW9uID4gMCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgaG93IG11Y2ggd2Ugc2hvdWxkIG1vdmUgaW4gdGhpcyBmcmFtZVxyXG4gICAgICAgICAgICAgICAgdmFyIG1vdmVtZW50ID0gZ2FwICogdW5pdHM7XHJcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIG5ldyBjdXJyZW50IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBjdXJWYWwgKz0gbW92ZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgd2UgZGlkbid0IG92ZXJzaG9vdCBvdXIgdGFyZ2V0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoKG1vdmVVcCAmJiBjdXJWYWwgPiB0YXJnZXQpIHx8ICghbW92ZVVwICYmIGN1clZhbCA8IHRhcmdldCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIG92ZXJzaG90LCBzZXQgY3VycmVudCB2YWx1ZSB0byB0aGUgdGFyZ2V0XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyVmFsID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gc2V0IGVsZW1lbnQgcHJvcGVydHkgdG8gY3VycmVudCB2YWx1ZSArIGV4dGVuc2lvbiAocHgsICUuLi4pXHJcbiAgICAgICAgICAgICAgICBlbGVtLnN0eWxlW3Byb3BdID0gY3VyVmFsICsgKChleHQpID8gZXh0IDowICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB3ZSBuZWVkIHRvIHJ1biBhbm90aGVyIGZyYW1lXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VyVmFsICE9PSB0YXJnZXQpIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGR1cmF0aW9uIGV4cGlyZWQsIHNldCBwcm9wZXJ0eSB2YWx1ZSB0byBpdCdzIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgZWxlbS5zdHlsZVtwcm9wXSA9IHRhcmdldCArICgoZXh0KSA/IGV4dCA6MCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZGZkLnJlc29sdmUoZWxlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy8gc3RhcnQgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gZGZkLnByb21pc2U7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50IChuYW1lLCBwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PkNyZWF0ZXMgYSBuZXcgSFRNbCBET00gZWxlbWVudC48L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibmFtZVwiIHR5cGU9XCJTdHJpbmdcIj5OYW1lIG9mIGVsZW1lbnQuIEV4YW1wbGU6IGRpdiwgc3BhbiwgdWwuLi48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInByb3BlcnRpZXNcIiB0eXBlPVwiT2JqZWN0XCI+RWxlbWVudCBhdHRyaWJ1dGVzLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm4gdHlwZT1cIk9iamVjdFwiPkRPTSBlbGVtZW50PC9yZXR1cm4+XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleSwgcHJvcGVydGllc1trZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWxlbTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBJTklUSUFMSVpBVElPTlxyXG4gICAgZnVuY3Rpb24gc2V0SW5pdGlhbERpbWVuc2lvbnMgKCkge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5TZXRzIHRoZSBpbml0aWFsIHdpZHRoIGhlaWdodCBiYXNlZCBvbiB1c2VyIHByZWZlcmVuY2UsIGNvbnRhaW5lciBkaW1lbnN0aW9ucyBvciBzbGlkZXM8L3N1bW1hcnk+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb20uY29udGFpbmVyKSB8fCBkb20uY29udGFpbmVyLmN1cnJlbnRTdHlsZSxcclxuICAgICAgICAgICAgY29udGFpbmVyID0ge1xyXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiBzdHlsZS53aWR0aCxcclxuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IHN0eWxlLmhlaWdodFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh3aWR0aCA9PT0gbnVsbCkgd2lkdGggPSBwYXJzZUludChjb250YWluZXIud2lkdGgsIDEwKTtcclxuICAgICAgICBpZiAoaGVpZ2h0ID09PSBudWxsKSBoZWlnaHQgPSBwYXJzZUludChjb250YWluZXIuaGVpZ2h0LCAxMCk7XHJcblxyXG4gICAgICAgIGRvbS5jb250YWluZXIuc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcclxuICAgICAgICBkb20uY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb20ubGlzdC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBkb20ubGlzdC5jaGlsZHJlbltpXSxcclxuICAgICAgICAgICAgICAgIHNsaWRlU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzbGlkZSksXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdCA9IHBhcnNlSW50KHNsaWRlU3R5bGUucGFkZGluZ0xlZnQgfHwgMCwgMTApLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0ID0gcGFyc2VJbnQoc2xpZGVTdHlsZS5wYWRkaW5nUmlnaHQgfHwgMCwgMTApLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZ1RvcCA9IHBhcnNlSW50KHNsaWRlU3R5bGUucGFkZGluZ1RvcCB8fCAwLCAxMCksXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tID0gcGFyc2VJbnQoc2xpZGVTdHlsZS5wYWRkaW5nQm90dG9tIHx8IDAsIDEwKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc2xpZGUuc3R5bGUud2lkdGgpIHNsaWRlLnN0eWxlLndpZHRoID0gKHdpZHRoIC0gcGFkZGluZ0xlZnQgLSBwYWRkaW5nUmlnaHQpICsgXCJweFwiO1xyXG4gICAgICAgICAgICBpZiAoIXNsaWRlLnN0eWxlLmhlaWdodCkgc2xpZGUuc3R5bGUuaGVpZ2h0ID0gKGhlaWdodCAtIHBhZGRpbmdUb3AgLSBwYWRkaW5nQm90dG9tKSArIFwicHhcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB2YXIgc2ltcGxlQ2Fyb3VzZWwgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBvYmogPSB7fTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XHJcbiAgICAgICAgICAgIFwibmV4dFwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImVudW1lcmFibGVcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIFwid3JpdGFibGVcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IHRyYW5zaXRpb25OZXh0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwicHJldlwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImVudW1lcmFibGVcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIFwid3JpdGFibGVcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IHRyYW5zaXRpb25QcmV2XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwidHJhbnNpdGlvblRvXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZW51bWVyYWJsZVwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgXCJ3cml0YWJsZVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogdHJhbnNpdGlvblRvXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBcInN0YXJ0QXV0b1JvdGF0ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImVudW1lcmF0ZVwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgXCJ3cml0YWJsZVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogc3RhcnRBdXRvUm90YXRlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwic3RvcEF1dG9Sb3RhdGVcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJlbnVtZXJhdGVcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIFwid3JpdGFibGVcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IHN0b3BBdXRvUm90YXRlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmZyZWV6ZShvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc2ltcGxlQ2Fyb3VzZWwsIHt9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0aWFsaXplIChvcHRpb25zKSB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PkluaXRpYWxpemUgdGhlIGNhcm91c2VsLjwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJvcHRpb25zXCIgdHlwZT1cIk9iamVjdFwiPlNpbXBsZUNhcm91c2VsIG9wdGlvbnMuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybiB0eXBlPVwiT2JqZWN0XCI+bmV3IFNpbXBsZUNhcm91c2VsIG9iamVjdC48L3JldHVybj5cclxuICAgICAgICBcclxuICAgICAgICB2YXIgX3NpbXBsZUNhcm91c2VsID0gbmV3IHNpbXBsZUNhcm91c2VsKCk7XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgIHNldChrZXksIG9wdGlvbnNba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkb20uY29udGFpbmVyID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgIC8vIHNhdmUgbGlzdCBlbGVtZW50XHJcbiAgICAgICAgICAgIGRvbS5saXN0ID0gZG9tLmNvbnRhaW5lci5jaGlsZHJlblswXTtcclxuXHJcbiAgICAgICAgICAgIC8vIGFkZCBjbGFzc2VzXHJcbiAgICAgICAgICAgIGFkZENsYXNzKGRvbS5jb250YWluZXIsIGNzcy5jb250YWluZXIpO1xyXG4gICAgICAgICAgICBhZGRDbGFzcyhkb20ubGlzdCwgY3NzLmxpc3QpO1xyXG4gICAgICAgICAgICBhZGRDbGFzcyhkb20ubGlzdC5jaGlsZHJlbiwgY3NzLnNsaWRlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHdpZHRoIGFuZCBoZWlnaHRcclxuICAgICAgICAgICAgc2V0SW5pdGlhbERpbWVuc2lvbnMoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgbmF2aWdhdGlvbmFsIGVsZW1lbnRzXHJcbiAgICAgICAgICAgIGNyZWF0ZU5hdmlnYXRpb25FbGVtZW50cygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gc2hvdyBmaXJzdCBzbGlkZSwgZG9uJ3QgYW5pbWF0ZVxyXG4gICAgICAgICAgICBzaG93Q3VycmVudChmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBzdGFydCBhdXRvLXJvdGF0ZVxyXG4gICAgICAgICAgICBpZiAoYXV0b1JvdGF0ZSkgc3RhcnRBdXRvUm90YXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gX3NpbXBsZUNhcm91c2VsO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmZyZWV6ZShpbml0aWFsaXplKTtcclxuICAgIHJldHVybiBpbml0aWFsaXplO1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbn0pKCk7Il19
