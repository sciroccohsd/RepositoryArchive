(function(){"use restrict";if(!window.OrgChartBuilder){var n=function(){function k(i,u){var l=typeof i,f=typeof u,s,e;if(l==="object"&&i!==null)for(s in i)k(s,i[s]);else if(l==="string")switch(i){case"$container":case"container":u instanceof jQuery?n=u:f==="string"&&(n=$(u));n instanceof jQuery&&(n.addClass("org-chart-container"),h=n.attr("id")||"org-chart-"+(new Date).getTime());break;case"data":u instanceof Array?o=u.slice(0):f==="object"&&u.key&&(o=[$.extend({},u)]);break;case"direction":case"orientation":switch(u){case"vertical":case"horizontal":c=u}break;case"scaletofit":case"scaleToFit":f==="boolean"&&(a=u);lt();break;case"distance":case"padding":case"gap":f==="number"&&u>=0&&(v=u);break;case"maxleafs":case"maxLeafs":case"leafsperrow":case"leafsPerRow":case"maxleafsperrow":case"maxLeafsPerRow":f==="number"&&u>=2&&(w=u);break;case"level":case"levels":f==="number"&&u>=0&&(b=u);break;case"showchildren":case"showChildren":f==="boolean"&&(ut=u);break;case"showsubs":case"showSubs":f==="boolean"&&(rt=u);break;case"class":case"classes":case"css":f==="object"&&u!==null&&(t=$.extend(t,u));f==="string"&&(t.leaf=u);break;case"fn":case"callback":case"callbacks":if(f==="object"&&u!==null)for(e in u)f[e]==="function"&&(y[e]=u[e]);else f==="function"&&(y.render=u)}return r}function u(r){var f=arguments.length>=2?arguments[1]:undefined;switch(r){case"id":case"ID":return h;case"$container":case"container":return n||$();case"$svg":case"svg":return p||(p=u("$",".org-chart-connectors"));case"data":return o instanceof Array?o.slice(0):[];case"direction":case"orientation":return c;case"scaletofit":case"scaleToFit":return a;case"zoom":case"scale":return i;case"distance":case"padding":case"gap":return v;case"$":if(typeof f=="string")return $(f,u("container"));case"class":case"classes":case"css":return $.extend({},t);case"template":return $.extend({},ei())}}function yt(n){return n&&k("data",n),o.length===0?u("container").empty():u("container").length>0&&(i=1,pt(),lt()),f("render",[o]),r}function pt(){p=null;var i=vt("svg",{id:"org-chart-connectors","class":"org-chart-connectors"}),r=d(o,"root");s||(s=$("<div />",{"class":"org-chart-wrapper "+t.wrapper}),n.append(s));s.empty().toggleClass("org-chart-horizontal",l()).toggleClass("org-chart-vertical",!l()).append(i).append(r);bt();ot();g()}function d(n,i,r){var o,s,h,g,l,p,a,y,k;typeof i!="string"&&(i="branch");switch(i){case"root":case"branch":case"subbranch":break;default:i="branch"}if((typeof r!="number"&&(r=0),i!=="root"&&r++,!(b>0)||!(r>b))&&(n instanceof Array||typeof n!="object"||(n=n.key?[n]:Object.values(n)),n instanceof Array)){o=["org-chart-tree"];o.push("org-chart-item-level-"+r);t.tree&&o.push(t.tree);o.push("org-chart-"+i);t[i]&&o.push(t[i]);var v=$(document.createDocumentFragment()),d=i==="subbranch",nt=!0,u=[],e=n.slice(0);if(w>=2&&c==="horizontal")if(s=ui(e.length,w),s.length===1)u.push(e);else for(h=0;h<s.length;h++)h!==s.length-1?(g=e.splice(s[h]),u.push(e.slice(0)),e=g):u.push(e);else u.push(e);for(l=0;l<u.length;l++){for(nt=l===u.length-1,p=u[l],a=$("<ul />",{"class":o.join(" ")}),a.data("level",r),y=0;y<p.length;y++)k=ft(p[y],d,r),k&&a.append(k);a.children().length>0&&v.append(a)}if(f("createBranch",[n,i,{$uls:v,isSubBranch:d}]),v.children().length>0)return v.children()}}function ft(n,i,r){typeof i!="boolean"&&(i=!1);var u=$("<li />",{id:h+"-org-chart-item-"+n.key,"class":"org-chart-item "+t.item}),e=wt(n,i),o=rt?et(n.sub||[],"subbranch",r):null,s=ut?et(n.children||[],"branch",r):null;return u.append(e),o&&u.append(o),s&&u.append(s),f("createSibling",[n,i,e,u,{$li:u,$leaf:e,$sub:o,$children:s}]),u}function et(n,t,i){var f=$(document.createDocumentFragment()),u,r;if(n instanceof Array||typeof n!="object"||(n=n.key?[n]:Object.values(n)),n instanceof Array||(n=[]),n.length>0)if(n[0]instanceof Array)for(u=0;u<n.length;u++)r=d(n[u]||[],t,i),r&&f.append(r);else r=d(n,t,i),r&&f.append(r);return f.children()}function wt(n,i){var o;typeof i=="boolean"&&(i=!1);o=["org-chart-leaf"];t.leaf&&o.push(t.leaf);n.class&&o.push(n.class);var h=n.url||"javascript:void(0);",u=$("<div />",{"class":o.join(" "),style:n.style||""}),e=$("<a />",{href:h,"class":"org-chart-link",title:n.description||"",target:n.urlTarget||"_parent"}),s=$("<div />",{"class":"org-chart-title"}).text(n.title||"");if(u.data({key:n.key,parent:n.parent,isSubBranch:i,cssLine:n.css&&n.css.line?n.css.line:""}),e.append(s),u.append(e),typeof n.render=="function")try{n.render.apply(n,[u,e,{$leaf:u,$a:e,$label:s,item:n,isSubBranch:i},r])}catch(c){console&&(console.log("Rendering leaf error:"),console.log(c))}return f("createLeaf",[n.key||"",n,u,{$div:u,$a:e,$label:s,item:n,isSubBranch:i}]),u}function bt(){c==="horizontal"&&$(".org-chart-tree:not(:last-child)",n).each(function(){var n,t;$(this).addClass("org-chart-balanced");n=$("> .org-chart-item",$(this));n.length%2!=0&&(t=ft({key:"",title:"",parent:""}),t.addClass("org-chart-hidden"),$(this).append(t),n=$("> .org-chart-item",$(this)));kt(n)})}function kt(n){var u=n.length/2,f=n.eq(0),e=n.eq(n.length-1),i=0,r=0,t=0;(n.each(function(n){var t=$(this);n<u?i+=t.outerWidth():r+=t.outerWidth()}),t=Math.round(Math.abs(i-r)),t!==0)&&(i<r?f.css({"margin-left":t+"px"}):e.css({"margin-right":t+"px"}))}function ot(){var t=$(document.createDocumentFragment()),i=".org-chart-leaf:not(.org-chart-hidden):visible";u("svg").empty();$(i,n).each(function(n,r){var u=$(this),e=u.data("parent"),o,c,s;if(!e||(o=$("#"+h+"-org-chart-item-"+e),o.length===0))return!0;c=$(i,o);s=dt({parent:{key:e,$:c,position:l()?"bottom center":"right center"},child:{key:u.data("key"),cssLine:u.data("cssLine"),$:u,position:l()?"top center":"left center"}});f("drawConnectorLine",[n,r,{$leaf:u,parentKey:e,$parentItem:o,$parentLeaf:c,$line:s}]);s&&t.append(s)});f("drawConnectorLines",[{$svg:u("svg"),children:t.children()}]);u("svg").append(t.children())}function dt(n){var i=[],f=st(n.parent.$,n.parent.position),e=st(n.child.$,n.child.position),r=[],u=["org-chart-connector"];return t.line&&u.push(t.line),n.child.cssLine&&u.push(n.child.cssLine),i.push(f.join(",")),r=gt(f,e,"child",10),r.length>0&&i.push(r.join(" ")),i.push(e.join(",")),vt("polyline",{points:i.join(" "),"class":u.join(" "),"data-parent":n.parent.key,"data-child":n.child.key})}function st(n,t){var c=ri(n),o=n.outerWidth(),s=n.outerHeight(),f=c.top,e=c.left,l=f+s,a=e+o,h=t.split(" "),v=h[0],y=h.length===2?h[1]:"center",p=i===1?1:1+i,r,u;switch(v){case"left":r=e;break;case"right":r=a;break;case"top":case"bottom":switch(y){case"left":r=e;break;case"right":r=a;break;default:r=e+o/2}break;default:r=e+o/2}switch(v){case"top":u=f;break;case"bottom":u=l;break;case"left":case"right":switch(y){case"top":u=f;break;case"bottom":u=l;break;default:u=f+s/2}break;default:u=f+s/2}return[Math.round(r)*p,Math.round(u)*p]}function gt(n,t,i){typeof i!="string"&&(i="center");var u,f,r,e=function(n,t){var r;switch(i){case"parent":return Math.min(n,t)+v;case"child":return Math.max(Math.max(n,t)-v,0);default:return r=Math.abs(t-n),Math.min(n,t)+r/2}};return l()?n[0]===t[0]?[]:(u=n[1],f=t[1],r=e(u,f),[[n[0],r],[t[0],r]]):n[1]===t[1]?[]:(u=n[0],f=t[0],r=e(u,f),[[r,n[1]],[r,t[1]]])}function ht(){if(i===1)return ct(),ot(),f("redrawConnectorLines"),r}function ct(){for(var n=document.getElementById("org-chart-connectors");n.lastChild;)n.removeChild(n.lastChild)}function lt(){var t=$(window),n="scaleToFit-"+h;a?t.data(n)!==!0&&t.on("resize."+n,g).data(n,!0):t.off(n).data(n,!1)}function g(){return ht(),a&&at(),f("resize"),r}function ni(){var t=tt(".org-chart-branch"),r=tt(".org-chart-item"),n=Math.max(t,r)*i;u("svg").width(n);s.width(n)}function ti(){var t=it(".org-chart-tree"),r=it(".org-chart-item"),n=Math.max(t,r)*i;u("svg").height(n);s.height(n)}function at(){var t;nt(1);var i,u=.1,e=1,l=".org-chart-root > .org-chart-item",o=tt(l),s=1,h=it(l),c=1,a=n.innerWidth(),v=n.innerHeight();if(o>a&&(s=Math.floor(a/o*100)/100),h>v&&(c=Math.floor(v/h*100)/100),s!==1||c!==1)return i=Math.min(Math.max(u,Math.min(s,c)),e),t=f("scaleChartToFit",[{scale:i,widest:o,tallest:h,min:u,max:e}]),typeof t=="number"&&t>u&&t<=e&&(i=t),nt(i),r}function nt(t){if(typeof t!="number"&&(t=1),(t<=0||t>1)&&(t=1),i!==t){i=t;$(".org-chart-root",n).css("transform",i===1?"":"scale("+i+")");var u=i===1?"removeAttribute":"setAttribute";return $("svg",n).children().each(function(){this[u]("transform","scale("+i+")")}),r}}function ii(n){if(typeof n=="string"&&n==="fit")at();else if(typeof n=="number")nt(n);else throw fi("'scale' is invalid. Requires a number (.1 - 1) or the word 'fit'.");return ni(),ti(),f("scaleChartTo",[n]),r}function l(){return c==="horizontal"}function vt(n,t){var r=document.createElementNS("http://www.w3.org/2000/svg",n),i;if(typeof t=="object")for(i in t)r.setAttribute(i,t[i]);return r}function ri(t){var i=n.offset(),r=t.offset();return{top:r.top-i.top,left:r.left-i.left}}function tt(n){var t=0;return $(n).each(function(){t=Math.max($(this).outerWidth(),t)}),t}function it(n){var t=0;return $(n).each(function(){t=Math.max($(this).outerHeight(),t)}),t}function ui(n,t){if(typeof t!="number"&&(t=6),t%2!=0&&(t=Math.floor(t)-1),t=Math.max(t,2),typeof n!="number")return[t];n=Math.max(Math.ceil(n),0);var i=t,r=Math.max(i-2,2),f=i-1,e=!1,u=[],s=n,o=function(n,t){return n-t};for(n-f>r&&n%2==1&&(e=!0,n-=f);n>0;)n<=i?(u.sort(o),u.push(n),n-=n):n%i==0?(u.push(i),n-=i):n%r==0?(u.push(r),n-=r):Math.abs(r-(n-r))<Math.abs(i-(n-i))?(u.push(r),n-=r):(u.push(i),n-=i);return s>2*r&&u.sort(o),e&&u.push(f),u}function f(n,t,i){if(typeof y[n]=="function")try{return y[n].apply(i||r,t)}catch(u){if(console){console.log(n+" callback failed! Error:");console.log(u);return}}}function fi(n,t){return t!=="string"&&(t="OrgChartBuilderException"),{name:t,message:n}}function ei(){return{key:"",parent:"",title:"",url:"",urlTarget:"",description:"",style:"","class":"",sub:[],children:[],render:null}}var r={},h,n,s,p,e={orientation:"horizontal",scaleToFit:!1,scale:1,gap:10,maxLeafsPerRow:0,levels:0,showSubs:!0,showChildren:!0},c=e.orientation,a=e.scaleToFit,i=e.scale,v=e.gap,w=e.maxLeafsPerRow,b=e.levels,rt=e.showSubs,ut=e.showChildren,t={wrapper:"",tree:"",root:"",branch:"",subbranch:"",item:"",leaf:"",line:""},y={},o;return Object.defineProperties(r,{set:{enumerable:!0,writable:!1,value:k},get:{enumerable:!0,writable:!1,value:u},render:{enumerable:!0,writable:!1,value:yt},scaleChartTo:{enumerable:!0,writable:!1,value:ii},redrawLines:{enumerable:!0,writable:!1,value:ht},removeLines:{enumerable:!0,writable:!1,value:ct},resize:{enumerable:!0,writable:!1,value:g}}),r};window.OrgChartBuilder=function(t){var i=new n;return t&&i.set(t),t.data instanceof Array&&i.get("container").length>0&&i.render(),i}}})();