(function(){"use restrict";if(!window.OrgChartBuilder){var n=function(){function b(t,u){var c=typeof t,f=typeof u,h,o;if(c==="object"&&t!==null)for(h in t)b(h,t[h]);else if(c==="string")switch(t){case"$container":case"container":u instanceof jQuery?n=u:f==="string"&&(n=$(u));n instanceof jQuery&&(n.addClass("org-chart-container"),s=n.attr("id")||"org-chart-"+(new Date).getTime());break;case"data":u instanceof Array?e=u.slice(0):f==="object"&&u.key&&(e=[$.extend({},u)]);break;case"direction":case"orientation":switch(u){case"vertical":case"horizontal":w=u}break;case"scaletofit":case"scaleToFit":f==="boolean"&&(l=u);et();break;case"distance":case"padding":case"gap":f==="number"&&u>=0&&(a=u);break;case"class":case"classes":case"css":f==="object"&&u!==null&&(i=$.extend(i,u));f==="string"&&(i.leaf=u);break;case"fn":case"callback":case"callbacks":if(f==="object"&&u!==null)for(o in u)f[o]==="function"&&(v[o]=u[o]);else f==="function"&&(v.render=u)}return r}function u(r){var f=arguments.length>=2?arguments[1]:undefined;switch(r){case"id":case"ID":return s;case"$container":case"container":return n||$();case"$svg":case"svg":return p||(p=u("$",".org-chart-connectors"));case"data":return e instanceof Array?e.slice(0):[];case"direction":case"orientation":return w;case"scaletofit":case"scaleToFit":return l;case"zoom":case"scale":return t;case"distance":case"padding":case"gap":return a;case"$":if(typeof f=="string")return $(f,u("container"));case"class":case"classes":case"css":return $.extend({},i);case"template":return $.extend({},ni())}}function lt(n){return n&&b("data",n),e.length===0?u("container").empty():u("container").length>0&&(t=1,at(),et()),f("render",[e]),r}function at(){p=null;var t=ct("svg",{id:"org-chart-connectors","class":"org-chart-connectors"}),r=y(e,"root");h||(h=$("<div />",{"class":"org-chart-wrapper "+i.wrapper}),n.append(h));h.empty().toggleClass("org-chart-horizontal",o()).toggleClass("org-chart-vertical",!o()).append(t).append(r);yt();it();d()}function y(n,t){var s,u,e,r,c,h,l;typeof t!="string"&&(t="branch");switch(t){case"root":case"branch":case"subbranch":break;default:t="branch"}if(n instanceof Array||typeof n!="object"||(n=n.key?[n]:Object.values(n)),n instanceof Array){for(s=["org-chart-tree"],i.tree&&s.push(i.tree),s.push("org-chart-"+t),i[t]&&s.push(i[t]),u=$("<ul />",{"class":s.join(" ")}),e=t==="subbranch",r=0;r<n.length;r++)c=k(n[r],e),c&&u.append(c),o()&&e&&(l=n[r].parent,r++,n[r]?h=k(n[r],e):(h=k({key:"",title:"",parent:""},e),h.addClass("org-chart-hidden")),h&&u.append(h));if(f("createBranch",[n,t,{$ul:u,isSubBranch:e}]),u.children().length>0)return u}}function k(n,t){var e,u;typeof t=="boolean"&&(t=!1);var r=$("<li />",{id:s+"-org-chart-item-"+n.key,"class":"org-chart-item "+i.item}),o=vt(n,t),h=y(n.children||[],"branch");if(n.sub instanceof Array||typeof n.sub!="object"||(n.sub=n.sub.key?[n.sub]:Object.values(n.sub)),n.sub instanceof Array||(n.sub=[]),r.append(o),n.sub.length>0)if(n.sub[0]instanceof Array)for(e=0;e<n.sub.length;e++)u=y(n.sub[e]||[],"subbranch"),u&&r.append(u);else u=y(n.sub,"subbranch"),u&&r.append(u);return h&&r.append(h),f("createSibling",[n,t,o,r,{$li:r,$leaf:o,$children:h}]),r}function vt(n,t){var o;typeof t=="boolean"&&(t=!1);o=["org-chart-leaf"];i.leaf&&o.push(i.leaf);n.class&&o.push(n.class);var h=n.url||"javascript:void(0);",u=$("<div />",{"class":o.join(" "),style:n.style||""}),e=$("<a />",{href:h,"class":"org-chart-link",title:n.description||""}),s=$("<div />",{"class":"org-chart-title"}).text(n.title||"");if(u.data({key:n.key,parent:n.parent,isSubBranch:t}),e.append(s),u.append(e),typeof n.render=="function")try{n.render.apply(n,[u,e,{$leaf:u,$a:e,$label:s,item:n,isSubBranch:t},r])}catch(c){console&&(console.log("Rendering leaf error:"),console.log(c))}return f("createLeaf",[n.key||"",n,u,{$div:u,$a:e,$label:s,item:n,isSubBranch:t}]),u}function yt(){$(".org-chart-subbranch",n).each(function(){var n=$("> .org-chart-item",$(this));n.length%2==0&&pt(n)})}function pt(n){var u=n.length/2,f=n.eq(0),e=n.eq(n.length-1),i=0,r=0,t=0;(n.each(function(n){var t=$(this);n<u?i+=t.outerWidth():r+=t.outerWidth()}),t=Math.round(Math.abs(i-r)),t!==0)&&(i<r?f.css({"margin-left":t+"px"}):e.css({"margin-right":t+"px"}))}function it(){var t=$(document.createDocumentFragment()),i=".org-chart-leaf:not(.org-chart-hidden):visible";u("svg").empty();$(i,n).each(function(n,r){var h=$(this),c=h.data("parent"),u,l,e;if(!c||(u=$("#"+s+"-org-chart-item-"+c),u.length===0))return!0;l=$(i,u);e=wt({parent:{$:l,position:o()?"bottom center":"right center"},child:{$:h,position:o()?"top center":"left center"}});f("drawConnectorLine",[n,r,{$leaf:h,parentKey:c,$parentItem:u,$parentLeaf:l,$line:e}]);e&&t.append(e)});f("drawConnectorLines",[{$svg:u("svg"),children:t.children()}]);u("svg").append(t.children())}function wt(n){var t=[],u=rt(n.parent.$,n.parent.position),f=rt(n.child.$,n.child.position),r=[];return t.push(u.join(",")),r=bt(u,f,"child",10),r.length>0&&t.push(r.join(" ")),t.push(f.join(",")),ct("polyline",{points:t.join(" "),"class":"org-chart-connector "+i.line})}function rt(n,i){var c=dt(n),o=n.outerWidth(),s=n.outerHeight(),f=c.top,e=c.left,l=f+s,a=e+o,h=i.split(" "),v=h[0],y=h.length===2?h[1]:"center",p=t===1?1:1+t,r,u;switch(v){case"left":r=e;break;case"right":r=a;break;case"top":case"bottom":switch(y){case"left":r=e;break;case"right":r=a;break;default:r=e+o/2}break;default:r=e+o/2}switch(v){case"top":u=f;break;case"bottom":u=l;break;case"left":case"right":switch(y){case"top":u=f;break;case"bottom":u=l;break;default:u=f+s/2}break;default:u=f+s/2}return[Math.round(r)*p,Math.round(u)*p]}function bt(n,t,i){typeof i!="string"&&(i="center");var u,f,r,e=function(n,t){var r;switch(i){case"parent":return Math.min(n,t)+a;case"child":return Math.max(Math.max(n,t)-a,0);default:return r=Math.abs(t-n),Math.min(n,t)+r/2}};return o()?n[0]===t[0]?[]:(u=n[1],f=t[1],r=e(u,f),[[n[0],r],[t[0],r]]):n[1]===t[1]?[]:(u=n[0],f=t[0],r=e(u,f),[[r,n[1]],[r,t[1]]])}function ut(){if(t===1)return ft(),it(),f("redrawConnectorLines"),r}function ft(){for(var n=document.getElementById("org-chart-connectors");n.lastChild;)n.removeChild(n.lastChild)}function et(){var t=$(window),n="scaleToFit-"+s;l?t.data(n)!==!0&&t.on("resize."+n,d).data(n,!0):t.off(n).data(n,!1)}function d(){return ut(),l&&ht(),ot(),st(),f("resize"),r}function ot(){var n=nt(".org-chart-branch"),i=nt(".org-chart-item");u("svg").width(Math.max(n,i)*t)}function st(){var n=tt(".org-chart-tree"),i=tt(".org-chart-item");u("svg").height(Math.max(n,i)*t)}function ht(){var t;g(1);var i,u=.1,e=1,l=".org-chart-root > .org-chart-item",o=nt(l),s=1,h=tt(l),c=1,a=n.innerWidth(),v=n.innerHeight();if(o>a&&(s=Math.floor(a/o*100)/100),h>v&&(c=Math.floor(v/h*100)/100),s!==1||c!==1)return i=Math.min(Math.max(u,Math.min(s,c)),e),t=f("scaleChartToFit",[{scale:i,widest:o,tallest:h,min:u,max:e}]),typeof t=="number"&&t>u&&t<=e&&(i=t),g(i),r}function g(i){if(typeof i!="number"&&(i=1),(i<=0||i>1)&&(i=1),t!==i){t=i;$(".org-chart-root",n).css("transform",t===1?"":"scale("+t+")");var u=t===1?"removeAttribute":"setAttribute";return $("svg",n).children().each(function(){this[u]("transform","scale("+t+")")}),r}}function kt(n){if(typeof n=="string"&&n==="fit")ht();else if(typeof n=="number")g(n);else throw gt("'scale' is invalid. Requires a number (.1 - 1) or the word 'fit'.");return ot(),st(),f("scaleChartTo",[n]),r}function o(){return w==="horizontal"}function ct(n,t){var r=document.createElementNS("http://www.w3.org/2000/svg",n),i;if(typeof t=="object")for(i in t)r.setAttribute(i,t[i]);return r}function dt(t){var i=n.offset(),r=t.offset();return{top:r.top-i.top,left:r.left-i.left}}function nt(n){var t=0;return $(n).each(function(){t=Math.max($(this).outerWidth(),t)}),t}function tt(n){var t=0;return $(n).each(function(){t=Math.max($(this).outerHeight(),t)}),t}function f(n,t,i){if(typeof v[n]=="function")try{return v[n].apply(i||r,t)}catch(u){if(console){console.log(n+" callback failed! Error:");console.log(u);return}}}function gt(n,t){return t!=="string"&&(t="OrgChartBuilderException"),{name:t,message:n}}function ni(){return{key:"",parent:"",title:"",url:"",description:"",style:"","class":"",sub:[],children:[],render:null}}var r={},s,n,h,p,c={orientation:"horizontal",scaleToFit:!1,scale:1,gap:10},w=c.orientation,l=c.scaleToFit,t=c.scale,a=c.gap,i={wrapper:"",tree:"",root:"",branch:"",subbranch:"",item:"",leaf:"",line:""},v={},e;return Object.defineProperties(r,{set:{enumerable:!0,writable:!1,value:b},get:{enumerable:!0,writable:!1,value:u},render:{enumerable:!0,writable:!1,value:lt},scaleChartTo:{enumerable:!0,writable:!1,value:kt},redrawLines:{enumerable:!0,writable:!1,value:ut},removeLines:{enumerable:!0,writable:!1,value:ft},resize:{enumerable:!0,writable:!1,value:d}}),r};window.OrgChartBuilder=function(t){var i=new n;return t&&i.set(t),t.data instanceof Array&&i.get("container").length>0&&i.render(),i}}})();