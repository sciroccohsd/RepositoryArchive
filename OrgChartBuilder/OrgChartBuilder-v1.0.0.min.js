(function(){"use restrict";if(!window.OrgChartBuilder){var n=function(){function d(t,u){var l=typeof t,f=typeof u,c,o;if(l==="object"&&t!==null)for(c in t)d(c,t[c]);else if(l==="string")switch(t){case"$container":case"container":u instanceof jQuery?n=u:f==="string"&&(n=$(u));n instanceof jQuery&&(n.addClass("org-chart-container"),s=n.attr("id")||"org-chart-"+(new Date).getTime());break;case"data":u instanceof Array?e=u.slice(0):f==="object"&&u.key&&(e=[$.extend({},u)]);break;case"direction":case"orientation":switch(u){case"vertical":case"horizontal":h=u}break;case"scaletofit":case"scaleToFit":f==="boolean"&&(a=u);ct();break;case"distance":case"padding":case"gap":f==="number"&&u>=0&&(v=u);break;case"break":case"breakon":case"breakOn":f==="number"&&u>=2&&(w=u);break;case"level":case"levels":f==="number"&&u>=0&&(b=u);break;case"class":case"classes":case"css":f==="object"&&u!==null&&(i=$.extend(i,u));f==="string"&&(i.leaf=u);break;case"fn":case"callback":case"callbacks":if(f==="object"&&u!==null)for(o in u)f[o]==="function"&&(y[o]=u[o]);else f==="function"&&(y.render=u)}return r}function u(r){var f=arguments.length>=2?arguments[1]:undefined;switch(r){case"id":case"ID":return s;case"$container":case"container":return n||$();case"$svg":case"svg":return p||(p=u("$",".org-chart-connectors"));case"data":return e instanceof Array?e.slice(0):[];case"direction":case"orientation":return h;case"scaletofit":case"scaleToFit":return a;case"zoom":case"scale":return t;case"distance":case"padding":case"gap":return v;case"$":if(typeof f=="string")return $(f,u("container"));case"class":case"classes":case"css":return $.extend({},i);case"template":return $.extend({},fi())}}function pt(n){return n&&d("data",n),e.length===0?u("container").empty():u("container").length>0&&(t=1,wt(),ct()),f("render",[e]),r}function wt(){p=null;k=0;var t=yt("svg",{id:"org-chart-connectors","class":"org-chart-connectors"}),r=g(e,"root");l||(l=$("<div />",{"class":"org-chart-wrapper "+i.wrapper}),n.append(l));l.empty().toggleClass("org-chart-horizontal",c()).toggleClass("org-chart-vertical",!c()).append(t).append(r);kt();et();nt()}function g(n,t){var e,o,s,g,c,y,a,v,p;typeof t!="string"&&(t="branch");switch(t){case"root":case"branch":case"subbranch":break;default:t="branch"}if((!(b>0)||!(k>=b))&&(t==="branch"&&k++,n instanceof Array||typeof n!="object"||(n=n.key?[n]:Object.values(n)),n instanceof Array)){e=["org-chart-tree"];i.tree&&e.push(i.tree);e.push("org-chart-"+t);i[t]&&e.push(i[t]);var l=$(document.createDocumentFragment()),d=t==="subbranch",nt=!0,r=[],u=n.slice(0);if(w>=2&&h==="horizontal")if(o=ri(u.length,w),o.length===1)r.push(u);else for(s=0;s<o.length;s++)s!==o.length-1?(g=u.splice(o[s]),r.push(u.slice(0)),u=g):r.push(u);else r.push(u);for(c=0;c<r.length;c++){for(nt=c===r.length-1,y=r[c],a=$("<ul />",{"class":e.join(" ")}),v=0;v<y.length;v++)p=ut(y[v],d),p&&a.append(p);a.children().length>0&&l.append(a)}if(f("createBranch",[n,t,{$uls:l,isSubBranch:d}]),l.children().length>0)return l.children()}}function ut(n,t){typeof t=="boolean"&&(t=!1);var r=$("<li />",{id:s+"-org-chart-item-"+n.key,"class":"org-chart-item "+i.item}),u=bt(n,t),e=ft(n.sub||[],"subbranch"),o=ft(n.children||[],"branch");return r.append(u),e&&r.append(e),o&&r.append(o),f("createSibling",[n,t,u,r,{$li:r,$leaf:u,$sub:e,$children:o}]),r}function ft(n,t){var u=$(document.createDocumentFragment()),r,i;if(n instanceof Array||typeof n!="object"||(n=n.key?[n]:Object.values(n)),n instanceof Array||(n=[]),n.length>0)if(n[0]instanceof Array)for(r=0;r<n.length;r++)i=g(n[r]||[],t),i&&u.append(i);else i=g(n,t),i&&u.append(i);return u.children()}function bt(n,t){var o;typeof t=="boolean"&&(t=!1);o=["org-chart-leaf"];i.leaf&&o.push(i.leaf);n.class&&o.push(n.class);var h=n.url||"javascript:void(0);",u=$("<div />",{"class":o.join(" "),style:n.style||""}),e=$("<a />",{href:h,"class":"org-chart-link",title:n.description||"",target:n.urlTarget||"_parent"}),s=$("<div />",{"class":"org-chart-title"}).text(n.title||"");if(u.data({key:n.key,parent:n.parent,isSubBranch:t}),e.append(s),u.append(e),typeof n.render=="function")try{n.render.apply(n,[u,e,{$leaf:u,$a:e,$label:s,item:n,isSubBranch:t},r])}catch(c){console&&(console.log("Rendering leaf error:"),console.log(c))}return f("createLeaf",[n.key||"",n,u,{$div:u,$a:e,$label:s,item:n,isSubBranch:t}]),u}function kt(){h==="horizontal"&&$(".org-chart-tree:not(:last-child)",n).each(function(){var n,t;$(this).addClass("org-chart-balanced");n=$("> .org-chart-item",$(this));n.length%2!=0&&(t=ut({key:"",title:"",parent:""}),t.addClass("org-chart-hidden"),$(this).append(t),n=$("> .org-chart-item",$(this)));dt(n)})}function dt(n){var u=n.length/2,f=n.eq(0),e=n.eq(n.length-1),i=0,r=0,t=0;(n.each(function(n){var t=$(this);n<u?i+=t.outerWidth():r+=t.outerWidth()}),t=Math.round(Math.abs(i-r)),t!==0)&&(i<r?f.css({"margin-left":t+"px"}):e.css({"margin-right":t+"px"}))}function et(){var t=$(document.createDocumentFragment()),i=".org-chart-leaf:not(.org-chart-hidden):visible";u("svg").empty();$(i,n).each(function(n,r){var o=$(this),h=o.data("parent"),u,l,e;if(!h||(u=$("#"+s+"-org-chart-item-"+h),u.length===0))return!0;l=$(i,u);e=gt({parent:{$:l,position:c()?"bottom center":"right center"},child:{$:o,position:c()?"top center":"left center"}});f("drawConnectorLine",[n,r,{$leaf:o,parentKey:h,$parentItem:u,$parentLeaf:l,$line:e}]);e&&t.append(e)});f("drawConnectorLines",[{$svg:u("svg"),children:t.children()}]);u("svg").append(t.children())}function gt(n){var t=[],u=ot(n.parent.$,n.parent.position),f=ot(n.child.$,n.child.position),r=[];return t.push(u.join(",")),r=ni(u,f,"child",10),r.length>0&&t.push(r.join(" ")),t.push(f.join(",")),yt("polyline",{points:t.join(" "),"class":"org-chart-connector "+i.line})}function ot(n,i){var c=ii(n),o=n.outerWidth(),s=n.outerHeight(),f=c.top,e=c.left,l=f+s,a=e+o,h=i.split(" "),v=h[0],y=h.length===2?h[1]:"center",p=t===1?1:1+t,r,u;switch(v){case"left":r=e;break;case"right":r=a;break;case"top":case"bottom":switch(y){case"left":r=e;break;case"right":r=a;break;default:r=e+o/2}break;default:r=e+o/2}switch(v){case"top":u=f;break;case"bottom":u=l;break;case"left":case"right":switch(y){case"top":u=f;break;case"bottom":u=l;break;default:u=f+s/2}break;default:u=f+s/2}return[Math.round(r)*p,Math.round(u)*p]}function ni(n,t,i){typeof i!="string"&&(i="center");var u,f,r,e=function(n,t){var r;switch(i){case"parent":return Math.min(n,t)+v;case"child":return Math.max(Math.max(n,t)-v,0);default:return r=Math.abs(t-n),Math.min(n,t)+r/2}};return c()?n[0]===t[0]?[]:(u=n[1],f=t[1],r=e(u,f),[[n[0],r],[t[0],r]]):n[1]===t[1]?[]:(u=n[0],f=t[0],r=e(u,f),[[r,n[1]],[r,t[1]]])}function st(){if(t===1)return ht(),et(),f("redrawConnectorLines"),r}function ht(){for(var n=document.getElementById("org-chart-connectors");n.lastChild;)n.removeChild(n.lastChild)}function ct(){var t=$(window),n="scaleToFit-"+s;a?t.data(n)!==!0&&t.on("resize."+n,nt).data(n,!0):t.off(n).data(n,!1)}function nt(){return st(),a&&vt(),lt(),at(),f("resize"),r}function lt(){var n=it(".org-chart-branch"),i=it(".org-chart-item");u("svg").width(Math.max(n,i)*t)}function at(){var n=rt(".org-chart-tree"),i=rt(".org-chart-item");u("svg").height(Math.max(n,i)*t)}function vt(){var t;tt(1);var i,u=.1,e=1,l=".org-chart-root > .org-chart-item",o=it(l),s=1,h=rt(l),c=1,a=n.innerWidth(),v=n.innerHeight();if(o>a&&(s=Math.floor(a/o*100)/100),h>v&&(c=Math.floor(v/h*100)/100),s!==1||c!==1)return i=Math.min(Math.max(u,Math.min(s,c)),e),t=f("scaleChartToFit",[{scale:i,widest:o,tallest:h,min:u,max:e}]),typeof t=="number"&&t>u&&t<=e&&(i=t),tt(i),r}function tt(i){if(typeof i!="number"&&(i=1),(i<=0||i>1)&&(i=1),t!==i){t=i;$(".org-chart-root",n).css("transform",t===1?"":"scale("+t+")");var u=t===1?"removeAttribute":"setAttribute";return $("svg",n).children().each(function(){this[u]("transform","scale("+t+")")}),r}}function ti(n){if(typeof n=="string"&&n==="fit")vt();else if(typeof n=="number")tt(n);else throw ui("'scale' is invalid. Requires a number (.1 - 1) or the word 'fit'.");return lt(),at(),f("scaleChartTo",[n]),r}function c(){return h==="horizontal"}function yt(n,t){var r=document.createElementNS("http://www.w3.org/2000/svg",n),i;if(typeof t=="object")for(i in t)r.setAttribute(i,t[i]);return r}function ii(t){var i=n.offset(),r=t.offset();return{top:r.top-i.top,left:r.left-i.left}}function it(n){var t=0;return $(n).each(function(){t=Math.max($(this).outerWidth(),t)}),t}function rt(n){var t=0;return $(n).each(function(){t=Math.max($(this).outerHeight(),t)}),t}function ri(n,t){if(typeof t!="number"&&(t=6),t%2!=0&&(t=Math.floor(t)-1),t=Math.max(t,2),typeof n!="number")return[t];n=Math.max(Math.ceil(n),0);var i=t,r=Math.max(i-2,2),f=i-1,e=!1,u=[],s=n,o=function(n,t){return n-t};for(n-f>r&&n%2==1&&(e=!0,n-=f);n>0;)n<=i?(u.sort(o),u.push(n),n-=n):n%i==0?(u.push(i),n-=i):n%r==0?(u.push(r),n-=r):Math.abs(r-(n-r))<Math.abs(i-(n-i))?(u.push(r),n-=r):(u.push(i),n-=i);return s>2*r&&u.sort(o),e&&u.push(f),u}function f(n,t,i){if(typeof y[n]=="function")try{return y[n].apply(i||r,t)}catch(u){if(console){console.log(n+" callback failed! Error:");console.log(u);return}}}function ui(n,t){return t!=="string"&&(t="OrgChartBuilderException"),{name:t,message:n}}function fi(){return{key:"",parent:"",title:"",url:"",urlTarget:"",description:"",style:"","class":"",sub:[],children:[],render:null}}var r={},s,n,l,p,o={orientation:"horizontal",scaleToFit:!1,scale:1,gap:10,breakOn:0,levels:0},h=o.orientation,a=o.scaleToFit,t=o.scale,v=o.gap,w=o.breakOn,b=o.levels,k=0,i={wrapper:"",tree:"",root:"",branch:"",subbranch:"",item:"",leaf:"",line:""},y={},e;return Object.defineProperties(r,{set:{enumerable:!0,writable:!1,value:d},get:{enumerable:!0,writable:!1,value:u},render:{enumerable:!0,writable:!1,value:pt},scaleChartTo:{enumerable:!0,writable:!1,value:ti},redrawLines:{enumerable:!0,writable:!1,value:st},removeLines:{enumerable:!0,writable:!1,value:ht},resize:{enumerable:!0,writable:!1,value:nt}}),r};window.OrgChartBuilder=function(t){var i=new n;return t&&i.set(t),t.data instanceof Array&&i.get("container").length>0&&i.render(),i}}})();